import{l as U,m as D}from"./index-uEPbdDor.js";import{e as I,r as M}from"./ruleUtils-B_kFGKyT.js";import{d as O,b as _,r as n,o as m,e as V,a as e,w as t,g as a,F as w,j as T,c as G,t as v,u as E,h as p}from"./index-WbBHlAeq.js";const J=p("small",null," Enviar encuesta de satisfacción ",-1),K=p("small",null," cancelar ",-1),P=p("small",null," Enviar ",-1),ee=O({__name:"ListHistoy",props:{document:{type:String},person:{type:Object},person_type:{type:String}},setup(j){var g,b;const c=j,i=_(!1),f=_([]),A=_(null),s=_({attention_id:"",person_type:c.person_type,person_id:(g=c.person)==null?void 0:g.id,email:(b=c.person)==null?void 0:b.email}),B=async r=>{i.value=!0,s.value.attention_id=r.id,console.log("sendSurvey")},$=async()=>{var r,o;if(!((o=(r=s.value)==null?void 0:r.email)!=null&&o.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/))){alert("Correo no válido");return}await U(s.value),console.log("confirmSendSurvey")},y=async()=>{f.value=await D(c.document)};return y(),(r,o)=>{const h=n("v-toolbar-title"),z=n("v-spacer"),x=n("v-icon"),d=n("v-btn"),H=n("v-toolbar"),S=n("v-card-title"),u=n("v-card-text"),k=n("v-card-actions"),C=n("v-card"),N=n("v-text-field"),Z=n("v-col"),q=n("v-row"),F=n("v-dialog"),L=n("v-container");return m(),V(w,null,[e(H,null,{default:t(()=>[e(h,null,{default:t(()=>[a("Historial de Atenciones")]),_:1}),e(z),e(d,{icon:"",onClick:y},{default:t(()=>[e(x,null,{default:t(()=>[a("mdi-refresh")]),_:1})]),_:1})]),_:1}),e(L,null,{default:t(()=>[(m(!0),V(w,null,T(f.value,(l,R)=>(m(),G(C,{key:R,variant:"tonal",class:"mb-4"},{default:t(()=>[e(S,null,{default:t(()=>[a(v(l.type_attention_name),1)]),_:2},1024),e(u,null,{default:t(()=>[a(v(l.description),1)]),_:2},1024),e(u,{class:"d-flex justify-end"},{default:t(()=>[e(x,{class:"me-2"},{default:t(()=>[a(" mdi-calendar ")]),_:1}),a(" "+v(l.created_at),1)]),_:2},1024),e(k,{class:"d-flex justify-end"},{default:t(()=>[e(d,{"prepend-icon":"mdi-send",color:"orange",variant:"tonal",density:"compact",onClick:Q=>B(l)},{default:t(()=>[J]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(F,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=l=>i.value=l),"max-width":"500"},{default:t(()=>[e(C,null,{default:t(()=>[e(S,null,{default:t(()=>[a(" Enviar encuesta de satisfacción ")]),_:1}),e(u,null,{default:t(()=>[e(q,null,{default:t(()=>[e(Z,{cols:"12"},{default:t(()=>[e(N,{modelValue:s.value.email,"onUpdate:modelValue":o[0]||(o[0]=l=>s.value.email=l),modelModifiers:{trim:!0},rules:[E(I),E(M)],label:"Correo Electrónico",hint:"Ingrese el correo electrónico al que se enviará la encuesta","persistent-hint":"",ref_key:"emailRef",ref:A},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(d,{color:"secondary",type:"button",onClick:o[1]||(o[1]=l=>i.value=!1)},{default:t(()=>[K]),_:1}),e(d,{color:"primary",type:"button",onClick:o[2]||(o[2]=l=>$())},{default:t(()=>[P]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{ee as _};
