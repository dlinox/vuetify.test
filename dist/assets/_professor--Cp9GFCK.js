import{d as $,i as z,b as i,r as l,o as J,c as K,w as t,a as e,h as f,t as m,g as r,f as L,u as p}from"./index-Bt-WY-_A.js";import{_ as Q}from"./ListHistoy.vue_vue_type_script_setup_true_lang-Do8-3XwF.js";import{l as W,m as X,o as F,e as Y,f as Z}from"./index-JxKka6Z2.js";import{r as x,e as ee}from"./ruleUtils-B_kFGKyT.js";import{A as te}from"./index-D7Wm7ZK5.js";import"./data-table.constants-C9jLg9DU.js";const oe=f("small",null,"Nueva Atencion",-1),ae=f("small",null,"Historial",-1),le={class:"mb-2"},ne={class:"mb-2"},ve=$({__name:"_professor",setup(ue){const U=z(),b=i("attention"),B=i([]),D=i([]),n=i(null),g=i(null),A=i(!1),u=i({...te}),I=async _=>{u.value.report_number=await W(_)},S=async()=>{var s,y,V,w;const{valid:_}=await((s=g.value)==null?void 0:s.validate());if(!_)return;A.value=!0;let a={...u.value,person_id:(y=n.value)==null?void 0:y.id,person_type:"002"};await X(a,"002"),(V=g.value)==null||V.reset(),n.value=await F(U.params.document),u.value.email=((w=n.value)==null?void 0:w.email)||"",A.value=!1};return(async()=>{var a;n.value=await F(U.params.document),(await Y()).filter(s=>{s.type==="002"&&B.value.push(s)}),D.value=await Z(),u.value.email=((a=n.value)==null?void 0:a.email)||""})(),(_,a)=>{const s=l("v-tab"),y=l("v-tabs"),V=l("v-toolbar"),w=l("v-card-title"),N=l("v-icon"),j=l("v-card-text"),k=l("v-text-field"),d=l("v-col"),C=l("v-combobox"),E=l("v-textarea"),R=l("v-row"),T=l("v-btn"),G=l("v-spacer"),H=l("v-card-actions"),M=l("v-form"),h=l("v-tabs-window-item"),O=l("v-tabs-window"),P=l("v-card");return J(),K(P,null,{default:t(()=>[e(V,null,{default:t(()=>[e(y,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=o=>b.value=o)},{default:t(()=>[e(s,{value:"attention"},{default:t(()=>[oe]),_:1}),e(s,{value:"history"},{default:t(()=>[ae]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:t(()=>{var o,c,v;return[f("small",null,m((o=n.value)==null?void 0:o.name)+" "+m((c=n.value)==null?void 0:c.paternal_surname)+" "+m((v=n.value)==null?void 0:v.maternal_surname),1)]}),_:1}),e(j,{class:"border-b"},{default:t(()=>{var o,c,v,q;return[f("p",le,[e(N,null,{default:t(()=>[r(" mdi-phone ")]),_:1}),r(" "+m((o=n.value)==null?void 0:o.phone_number)+" | ",1),e(N,null,{default:t(()=>[r(" mdi-email ")]),_:1}),r(" "+m((c=n.value)==null?void 0:c.email),1)]),f("p",ne,[e(N,null,{default:t(()=>[r(" mdi-school ")]),_:1}),r(" "+m((v=n.value)==null?void 0:v.career_name)+" | "+m((q=n.value)==null?void 0:q.code),1)])]}),_:1}),e(O,{modelValue:b.value,"onUpdate:modelValue":a[6]||(a[6]=o=>b.value=o)},{default:t(()=>[e(h,{value:"attention"},{default:t(()=>[e(M,{ref_key:"formRef",ref:g,onSubmit:L(S,["prevent"])},{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(d,{cols:"10",md:"8"},{default:t(()=>[e(j,null,{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(k,{modelValue:u.value.email,"onUpdate:modelValue":a[1]||(a[1]=o=>u.value.email=o),label:"Correo",rules:[p(x),p(ee)],hint:"El correo es obligatorio, para el envio de correos, asegurese de que sea correcto.","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12",md:"8"},{default:t(()=>[e(C,{modelValue:u.value.type_attention_id,"onUpdate:modelValue":[a[2]||(a[2]=o=>u.value.type_attention_id=o),I],items:B.value,label:"Tipo de Atencion","return-object":!1,rules:[p(x)]},null,8,["modelValue","items","rules"])]),_:1}),e(d,{cols:"12",md:"4"},{default:t(()=>[e(k,{modelValue:u.value.report_number,"onUpdate:modelValue":a[3]||(a[3]=o=>u.value.report_number=o),label:"Nro de Reporte",rules:[p(x)],readonly:""},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(E,{modelValue:u.value.description,"onUpdate:modelValue":a[4]||(a[4]=o=>u.value.description=o),label:"Descripcion",rules:[p(x)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(C,{modelValue:u.value.derivate_to,"onUpdate:modelValue":a[5]||(a[5]=o=>u.value.derivate_to=o),items:D.value,label:"Derivar a",chips:"",multiple:"","return-object":!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(T,{color:"primary",type:"button",link:"",to:"/a/attentions"},{default:t(()=>[r(" Volver ")]),_:1}),e(G),e(T,{color:"primary",type:"submit",variant:"flat",loading:A.value},{default:t(()=>[r(" Guardar atenciÃ³n ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(h,{value:"history"},{default:t(()=>{var o;return[e(Q,{document:(o=n.value)==null?void 0:o.document_number,person:n.value,person_type:"002"},null,8,["document","person"])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{ve as default};
