import{d as $,i as z,b as r,r as a,o as F,c as J,w as t,a as e,h as f,t as i,g as s,f as K,u as p}from"./index-Dcw02d0D.js";import{_ as L}from"./ListHistoy.vue_vue_type_script_setup_true_lang-C6ZJiycN.js";import{l as Q,n as I,e as W,f as X}from"./index-rMzRKMBG.js";import{r as x,e as Y}from"./ruleUtils-B_kFGKyT.js";import{A as Z}from"./index-SwPYqIxQ.js";import"./data-table.constants-C9jLg9DU.js";const ee=f("small",null,"Nueva Atencion",-1),te=f("small",null,"Historial",-1),oe={class:"mb-2"},ae={class:"mb-2"},_e=$({__name:"_professor",setup(le){const D=z(),b=r("attention"),N=r([]),j=r([]),n=r(null),g=r(null),U=r(!1),u=r({...Z}),S=async()=>{var _,V,w,y;const{valid:d}=await((_=g.value)==null?void 0:_.validate());if(!d)return;U.value=!0;let l={...u.value,person_id:(V=n.value)==null?void 0:V.id,person_type:"002"};await Q(l,"002"),(w=g.value)==null||w.reset(),n.value=await I(D.params.document),u.value.email=((y=n.value)==null?void 0:y.email)||"",U.value=!1};return(async()=>{var d;n.value=await I(D.params.document),N.value=await W(),j.value=await X(),u.value.email=((d=n.value)==null?void 0:d.email)||""})(),(d,l)=>{const _=a("v-tab"),V=a("v-tabs"),w=a("v-toolbar"),y=a("v-card-title"),A=a("v-icon"),k=a("v-card-text"),B=a("v-text-field"),m=a("v-col"),C=a("v-combobox"),E=a("v-textarea"),R=a("v-row"),T=a("v-btn"),G=a("v-spacer"),H=a("v-card-actions"),M=a("v-form"),h=a("v-tabs-window-item"),O=a("v-tabs-window"),P=a("v-card");return F(),J(P,null,{default:t(()=>[e(w,null,{default:t(()=>[e(V,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=o=>b.value=o)},{default:t(()=>[e(_,{value:"attention"},{default:t(()=>[ee]),_:1}),e(_,{value:"history"},{default:t(()=>[te]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>{var o,c,v;return[f("small",null,i((o=n.value)==null?void 0:o.name)+" "+i((c=n.value)==null?void 0:c.paternal_surname)+" "+i((v=n.value)==null?void 0:v.maternal_surname),1)]}),_:1}),e(k,{class:"border-b"},{default:t(()=>{var o,c,v,q;return[f("p",oe,[e(A,null,{default:t(()=>[s(" mdi-phone ")]),_:1}),s(" "+i((o=n.value)==null?void 0:o.phone_number)+" | ",1),e(A,null,{default:t(()=>[s(" mdi-email ")]),_:1}),s(" "+i((c=n.value)==null?void 0:c.email),1)]),f("p",ae,[e(A,null,{default:t(()=>[s(" mdi-school ")]),_:1}),s(" "+i((v=n.value)==null?void 0:v.career_name)+" | "+i((q=n.value)==null?void 0:q.code),1)])]}),_:1}),e(O,{modelValue:b.value,"onUpdate:modelValue":l[6]||(l[6]=o=>b.value=o)},{default:t(()=>[e(h,{value:"attention"},{default:t(()=>[e(M,{ref_key:"formRef",ref:g,onSubmit:K(S,["prevent"])},{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(m,{cols:"10",md:"8"},{default:t(()=>[e(k,null,{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[e(B,{modelValue:u.value.email,"onUpdate:modelValue":l[1]||(l[1]=o=>u.value.email=o),label:"Correo",rules:[p(x),p(Y)],hint:"El correo es obligatorio, para el envio de correos, asegurese de que sea correcto.","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",md:"8"},{default:t(()=>[e(C,{modelValue:u.value.type_attention_id,"onUpdate:modelValue":l[2]||(l[2]=o=>u.value.type_attention_id=o),items:N.value,label:"Tipo de Atencion","return-object":!1,rules:[p(x)]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"4"},{default:t(()=>[e(B,{modelValue:u.value.report_number,"onUpdate:modelValue":l[3]||(l[3]=o=>u.value.report_number=o),label:"Nro de Reporte",rules:[p(x)]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(E,{modelValue:u.value.description,"onUpdate:modelValue":l[4]||(l[4]=o=>u.value.description=o),label:"Descripcion",rules:[p(x)]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(C,{modelValue:u.value.derivate_to,"onUpdate:modelValue":l[5]||(l[5]=o=>u.value.derivate_to=o),items:j.value,label:"Derivar a",chips:"",multiple:"","return-object":!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(T,{color:"primary",type:"button",link:"",to:"/a/attentions"},{default:t(()=>[s(" Volver ")]),_:1}),e(G),e(T,{color:"primary",type:"submit",variant:"flat",loading:U.value},{default:t(()=>[s(" Guardar atenciÃ³n ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(h,{value:"history"},{default:t(()=>{var o;return[e(L,{document:(o=n.value)==null?void 0:o.document_number,person:n.value,person_type:"002"},null,8,["document","person"])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{_e as default};
