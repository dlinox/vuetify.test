import{d as z,i as F,b as i,r as a,o as J,c as K,w as t,a as e,h as f,t as m,g as s,f as L,u as p}from"./index-BRh64UmY.js";import{_ as Q}from"./ListHistoy.vue_vue_type_script_setup_true_lang-BCCDH7wy.js";import{l as W,m as X,o as I,e as Y,f as Z}from"./index-DkboTV6d.js";import{r as x,e as ee}from"./ruleUtils-B_kFGKyT.js";import{A as te}from"./index-D7Wm7ZK5.js";import"./data-table.constants-C9jLg9DU.js";const oe=f("small",null,"Nueva Atencion",-1),ae=f("small",null,"Historial",-1),le={class:"mb-2"},ne={class:"mb-2"},ve=z({__name:"_professor",setup(ue){const U=F(),b=i("attention"),B=i([]),D=i([]),n=i(null),g=i(null),N=i(!1),u=i({...te}),S=async r=>{u.value.report_number=await W(r)},E=async()=>{var _,V,y,w;const{valid:r}=await((_=g.value)==null?void 0:_.validate());if(!r)return;N.value=!0;let l={...u.value,person_id:(V=n.value)==null?void 0:V.id,person_type:"002"};await X(l,"002"),(y=g.value)==null||y.reset(),n.value=await I(U.params.document),u.value.email=((w=n.value)==null?void 0:w.email)||"",N.value=!1};return(async()=>{var r;n.value=await I(U.params.document),B.value=await Y(),D.value=await Z(),u.value.email=((r=n.value)==null?void 0:r.email)||""})(),(r,l)=>{const _=a("v-tab"),V=a("v-tabs"),y=a("v-toolbar"),w=a("v-card-title"),A=a("v-icon"),j=a("v-card-text"),k=a("v-text-field"),d=a("v-col"),C=a("v-combobox"),G=a("v-textarea"),R=a("v-row"),T=a("v-btn"),H=a("v-spacer"),M=a("v-card-actions"),O=a("v-form"),h=a("v-tabs-window-item"),P=a("v-tabs-window"),$=a("v-card");return J(),K($,null,{default:t(()=>[e(y,null,{default:t(()=>[e(V,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=o=>b.value=o)},{default:t(()=>[e(_,{value:"attention"},{default:t(()=>[oe]),_:1}),e(_,{value:"history"},{default:t(()=>[ae]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:t(()=>{var o,c,v;return[f("small",null,m((o=n.value)==null?void 0:o.name)+" "+m((c=n.value)==null?void 0:c.paternal_surname)+" "+m((v=n.value)==null?void 0:v.maternal_surname),1)]}),_:1}),e(j,{class:"border-b"},{default:t(()=>{var o,c,v,q;return[f("p",le,[e(A,null,{default:t(()=>[s(" mdi-phone ")]),_:1}),s(" "+m((o=n.value)==null?void 0:o.phone_number)+" | ",1),e(A,null,{default:t(()=>[s(" mdi-email ")]),_:1}),s(" "+m((c=n.value)==null?void 0:c.email),1)]),f("p",ne,[e(A,null,{default:t(()=>[s(" mdi-school ")]),_:1}),s(" "+m((v=n.value)==null?void 0:v.career_name)+" | "+m((q=n.value)==null?void 0:q.code),1)])]}),_:1}),e(P,{modelValue:b.value,"onUpdate:modelValue":l[6]||(l[6]=o=>b.value=o)},{default:t(()=>[e(h,{value:"attention"},{default:t(()=>[e(O,{ref_key:"formRef",ref:g,onSubmit:L(E,["prevent"])},{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(d,{cols:"10",md:"8"},{default:t(()=>[e(j,null,{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(k,{modelValue:u.value.email,"onUpdate:modelValue":l[1]||(l[1]=o=>u.value.email=o),label:"Correo",rules:[p(x),p(ee)],hint:"El correo es obligatorio, para el envio de correos, asegurese de que sea correcto.","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12",md:"8"},{default:t(()=>[e(C,{modelValue:u.value.type_attention_id,"onUpdate:modelValue":[l[2]||(l[2]=o=>u.value.type_attention_id=o),S],items:B.value,label:"Tipo de Atencion","return-object":!1,rules:[p(x)]},null,8,["modelValue","items","rules"])]),_:1}),e(d,{cols:"12",md:"4"},{default:t(()=>[e(k,{modelValue:u.value.report_number,"onUpdate:modelValue":l[3]||(l[3]=o=>u.value.report_number=o),label:"Nro de Reporte",rules:[p(x)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(G,{modelValue:u.value.description,"onUpdate:modelValue":l[4]||(l[4]=o=>u.value.description=o),label:"Descripcion",rules:[p(x)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(C,{modelValue:u.value.derivate_to,"onUpdate:modelValue":l[5]||(l[5]=o=>u.value.derivate_to=o),items:D.value,label:"Derivar a",chips:"",multiple:"","return-object":!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(T,{color:"primary",type:"button",link:"",to:"/a/attentions"},{default:t(()=>[s(" Volver ")]),_:1}),e(H),e(T,{color:"primary",type:"submit",variant:"flat",loading:N.value},{default:t(()=>[s(" Guardar atenciÃ³n ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(h,{value:"history"},{default:t(()=>{var o;return[e(Q,{document:(o=n.value)==null?void 0:o.document_number,person:n.value,person_type:"002"},null,8,["document","person"])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{ve as default};
