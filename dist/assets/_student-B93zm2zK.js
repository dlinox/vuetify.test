import{d as K,i as L,b as m,r as l,o as P,c as Q,w as t,a as e,h as _,g as s,t as i,f as W,u as p}from"./index-BRh64UmY.js";import{l as X,m as Y,n as I,e as Z,f as ee}from"./index-DkboTV6d.js";import{A as te}from"./index-D7Wm7ZK5.js";import{_ as ae}from"./ListHistoy.vue_vue_type_script_setup_true_lang-BCCDH7wy.js";import{r as y,e as le}from"./ruleUtils-B_kFGKyT.js";import"./data-table.constants-C9jLg9DU.js";const oe=_("small",null,"Nueva Atencion",-1),ne=_("small",null,"Historial",-1),ue={class:"mb-2"},se={class:"mb-2"},re={class:"mb-2"},de={class:"mb-2"},Ve=K({__name:"_student",setup(me){const g=L(),f=m("attention"),N=m([]),h=m([]),n=m(null),u=m({...te}),w=m(!1),x=m(null),E=async d=>{u.value.report_number=await X(d)},G=async()=>{var v,b,V,r;const{valid:d}=await((v=x.value)==null?void 0:v.validate());if(!d)return;w.value=!0;let o={...u.value,person_id:(b=n.value)==null?void 0:b.id,person_type:"001"};await Y(o,"001"),(V=x.value)==null||V.reset(),n.value=await I(g.params.document),u.value.email=((r=n.value)==null?void 0:r.email)||"",w.value=!1};return(async()=>{var d;n.value=await I(g.params.document),N.value=await Z(),h.value=await ee(),u.value.email=((d=n.value)==null?void 0:d.email)||""})(),(d,o)=>{const v=l("v-tab"),b=l("v-tabs"),V=l("v-toolbar"),r=l("v-icon"),H=l("v-card-title"),A=l("v-card-text"),U=l("v-text-field"),c=l("v-col"),B=l("v-combobox"),M=l("v-textarea"),D=l("v-row"),j=l("v-btn"),O=l("v-spacer"),$=l("v-card-actions"),z=l("v-form"),k=l("v-tabs-window-item"),F=l("v-tabs-window"),J=l("v-card");return P(),Q(J,null,{default:t(()=>[e(V,null,{default:t(()=>[e(b,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=a=>f.value=a)},{default:t(()=>[e(v,{value:"attention"},{default:t(()=>[oe]),_:1}),e(v,{value:"history"},{default:t(()=>[ne]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(H,null,{default:t(()=>{var a;return[_("small",null,[e(r,{class:"mb-1"},{default:t(()=>[s(" mdi-account ")]),_:1}),s(" "+i((a=n.value)==null?void 0:a.full_name),1)])]}),_:1}),e(A,{class:"border-b"},{default:t(()=>{var a,C,R,T,S,q;return[_("p",ue,[e(r,null,{default:t(()=>[s(" mdi-phone ")]),_:1}),s(" "+i((a=n.value)==null?void 0:a.phone_number)+" | ",1),e(r,null,{default:t(()=>[s(" mdi-email ")]),_:1}),s(" "+i((C=n.value)==null?void 0:C.email),1)]),_("p",se,[e(r,null,{default:t(()=>[s(" mdi-school ")]),_:1}),s(" "+i((R=n.value)==null?void 0:R.career_name)+" | "+i((T=n.value)==null?void 0:T.student_code),1)]),_("p",re,[e(r,null,{default:t(()=>[s(" mdi-human-male ")]),_:1}),s(" "+i((S=n.value)==null?void 0:S.father_name),1)]),_("p",de,[e(r,null,{default:t(()=>[s(" mdi-human-female ")]),_:1}),s(" "+i((q=n.value)==null?void 0:q.mother_name),1)])]}),_:1}),e(F,{modelValue:f.value,"onUpdate:modelValue":o[6]||(o[6]=a=>f.value=a)},{default:t(()=>[e(k,{value:"attention"},{default:t(()=>[e(z,{ref_key:"formRef",ref:x,onSubmit:W(G,["prevent"])},{default:t(()=>[e(D,{justify:"center"},{default:t(()=>[e(c,{cols:"10",md:"8"},{default:t(()=>[e(A,null,{default:t(()=>[e(D,{justify:"center"},{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[e(U,{modelValue:u.value.email,"onUpdate:modelValue":o[1]||(o[1]=a=>u.value.email=a),label:"Correo",rules:[p(y),p(le)],hint:"El correo es obligatorio, para el envio de correos, asegurese de que sea correcto.","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12",md:"8"},{default:t(()=>[e(B,{modelValue:u.value.type_attention_id,"onUpdate:modelValue":[o[2]||(o[2]=a=>u.value.type_attention_id=a),E],items:N.value,label:"Tipo de Atencion","return-object":!1,rules:[p(y)]},null,8,["modelValue","items","rules"])]),_:1}),e(c,{cols:"12",md:"4"},{default:t(()=>[e(U,{modelValue:u.value.report_number,"onUpdate:modelValue":o[3]||(o[3]=a=>u.value.report_number=a),label:"Nro de Reporte",rules:[p(y)],readonly:""},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:t(()=>[e(M,{modelValue:u.value.description,"onUpdate:modelValue":o[4]||(o[4]=a=>u.value.description=a),label:"Descripcion",rules:[p(y)]},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:t(()=>[e(B,{modelValue:u.value.derivate_to,"onUpdate:modelValue":o[5]||(o[5]=a=>u.value.derivate_to=a),items:h.value,label:"Derivar a",chips:"",multiple:"","return-object":!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e($,null,{default:t(()=>[e(j,{color:"primary",type:"button",link:"",to:"/a/attentions"},{default:t(()=>[s(" Volver ")]),_:1}),e(O),e(j,{color:"primary",type:"submit",variant:"flat",loading:w.value},{default:t(()=>[s(" Guardar atenciÃ³n ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(k,{value:"history"},{default:t(()=>{var a;return[e(ae,{document:(a=n.value)==null?void 0:a.student_code,person:n.value,person_type:"001"},null,8,["document","person"])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{Ve as default};
