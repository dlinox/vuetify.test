import{d as z,i as E,b as r,r as a,o as F,c as J,w as t,a as e,h as m,g as u,t as i,f as K,u as V}from"./index-WbBHlAeq.js";import{h as L,i as P,e as Q,f as W}from"./index-uEPbdDor.js";import{A as C}from"./index-DJh3hycU.js";import{_ as X}from"./ListHistoy.vue_vue_type_script_setup_true_lang-D3IzWbnM.js";import{r as y}from"./ruleUtils-B_kFGKyT.js";import"./data-table.constants-B0R7xaSt.js";const Y=m("small",null,"Nueva Atencion",-1),Z=m("small",null,"Historial",-1),ee={class:"mb-3"},_e=z({__name:"_student",setup(te){const S=E(),c=r("attention"),w=r([]),x=r([]),s=r(null),n=r({...C}),b=r(null),T=async()=>{var _,v,p;const{valid:A}=await((_=b.value)==null?void 0:_.validate());if(!A)return;let l={...n.value,person_id:(v=s.value)==null?void 0:v.id};await L(l,"001"),(p=b.value)==null||p.reset(),n.value={...C}};return(async()=>{s.value=await P(S.params.document),w.value=await Q(),x.value=await W()})(),(A,l)=>{const _=a("v-tab"),v=a("v-tabs"),p=a("v-toolbar"),f=a("v-icon"),h=a("v-card-title"),U=a("v-card-text"),g=a("v-combobox"),d=a("v-col"),I=a("v-text-field"),q=a("v-textarea"),D=a("v-row"),N=a("v-btn"),G=a("v-spacer"),H=a("v-card-actions"),M=a("v-form"),j=a("v-tabs-window-item"),O=a("v-tabs-window"),$=a("v-card");return F(),J($,{variant:"tonal"},{default:t(()=>[e(p,{density:"compact"},{default:t(()=>[e(v,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=o=>c.value=o)},{default:t(()=>[e(_,{value:"attention"},{default:t(()=>[Y]),_:1}),e(_,{value:"history"},{default:t(()=>[Z]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:t(()=>{var o;return[m("small",null,[e(f,{class:"mb-1"},{default:t(()=>[u(" mdi-account ")]),_:1}),u(" "+i((o=s.value)==null?void 0:o.full_name),1)])]}),_:1}),e(U,{class:"border-b"},{default:t(()=>{var o,k,B,R;return[m("p",ee,[e(f,null,{default:t(()=>[u(" mdi-phone ")]),_:1}),u(" "+i((o=s.value)==null?void 0:o.phone_number)+" | ",1),e(f,null,{default:t(()=>[u(" mdi-email ")]),_:1}),u(" "+i((k=s.value)==null?void 0:k.email),1)]),m("p",null,[e(f,null,{default:t(()=>[u(" mdi-school ")]),_:1}),u(" "+i((B=s.value)==null?void 0:B.career_name)+" | "+i((R=s.value)==null?void 0:R.student_code),1)])]}),_:1}),e(O,{modelValue:c.value,"onUpdate:modelValue":l[5]||(l[5]=o=>c.value=o)},{default:t(()=>[e(j,{value:"attention"},{default:t(()=>[e(M,{ref_key:"formRef",ref:b,onSubmit:K(T,["prevent"])},{default:t(()=>[e(D,{justify:"center"},{default:t(()=>[e(d,{cols:"10",md:"8"},{default:t(()=>[e(U,null,{default:t(()=>[e(D,{justify:"center"},{default:t(()=>[e(d,{cols:"12",md:"8"},{default:t(()=>[e(g,{modelValue:n.value.type_attention_id,"onUpdate:modelValue":l[1]||(l[1]=o=>n.value.type_attention_id=o),items:w.value,label:"Tipo de Atencion","return-object":!1,rules:[V(y)]},null,8,["modelValue","items","rules"])]),_:1}),e(d,{cols:"12",md:"4"},{default:t(()=>[e(I,{modelValue:n.value.report_number,"onUpdate:modelValue":l[2]||(l[2]=o=>n.value.report_number=o),label:"Nro de Reporte",rules:[V(y)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(q,{modelValue:n.value.description,"onUpdate:modelValue":l[3]||(l[3]=o=>n.value.description=o),label:"Descripcion",rules:[V(y)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(g,{modelValue:n.value.derivate_to,"onUpdate:modelValue":l[4]||(l[4]=o=>n.value.derivate_to=o),items:x.value,label:"Derivar a",chips:"",multiple:"","return-object":!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(N,{color:"primary",type:"button",link:"",to:"/a/attentions"},{default:t(()=>[u(" Volver ")]),_:1}),e(G),e(N,{color:"primary",type:"submit",variant:"flat"},{default:t(()=>[u(" Guardar atenciÃ³n ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(j,{value:"history"},{default:t(()=>{var o;return[e(X,{document:(o=s.value)==null?void 0:o.student_code,person:s.value,person_type:"001"},null,8,["document","person"])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{_e as default};
