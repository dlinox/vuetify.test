import{d as J,i as K,b as d,r as a,o as L,c as P,w as t,a as e,h as i,g as u,t as m,f as Q,u as p}from"./index-Dcw02d0D.js";import{l as W,m as I,e as X,f as Y}from"./index-rMzRKMBG.js";import{A as Z}from"./index-SwPYqIxQ.js";import{_ as ee}from"./ListHistoy.vue_vue_type_script_setup_true_lang-C6ZJiycN.js";import{r as w,e as te}from"./ruleUtils-B_kFGKyT.js";import"./data-table.constants-C9jLg9DU.js";const le=i("small",null,"Nueva Atencion",-1),ae=i("small",null,"Historial",-1),oe={class:"mb-2"},ne={class:"mb-2"},ue={class:"mb-2"},se={class:"mb-2"},fe=J({__name:"_student",setup(re){const g=K(),f=d("attention"),h=d([]),U=d([]),n=d(null),s=d({...Z}),y=d(!1),x=d(null),E=async()=>{var v,b,V,r;const{valid:c}=await((v=x.value)==null?void 0:v.validate());if(!c)return;y.value=!0;let o={...s.value,person_id:(b=n.value)==null?void 0:b.id,person_type:"001"};await W(o,"001"),(V=x.value)==null||V.reset(),n.value=await I(g.params.document),s.value.email=((r=n.value)==null?void 0:r.email)||"",y.value=!1};return(async()=>{var c;n.value=await I(g.params.document),h.value=await X(),U.value=await Y(),s.value.email=((c=n.value)==null?void 0:c.email)||""})(),(c,o)=>{const v=a("v-tab"),b=a("v-tabs"),V=a("v-toolbar"),r=a("v-icon"),G=a("v-card-title"),A=a("v-card-text"),D=a("v-text-field"),_=a("v-col"),N=a("v-combobox"),H=a("v-textarea"),j=a("v-row"),k=a("v-btn"),M=a("v-spacer"),O=a("v-card-actions"),$=a("v-form"),B=a("v-tabs-window-item"),z=a("v-tabs-window"),F=a("v-card");return L(),P(F,null,{default:t(()=>[e(V,null,{default:t(()=>[e(b,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=l=>f.value=l)},{default:t(()=>[e(v,{value:"attention"},{default:t(()=>[le]),_:1}),e(v,{value:"history"},{default:t(()=>[ae]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(G,null,{default:t(()=>{var l;return[i("small",null,[e(r,{class:"mb-1"},{default:t(()=>[u(" mdi-account ")]),_:1}),u(" "+m((l=n.value)==null?void 0:l.full_name),1)])]}),_:1}),e(A,{class:"border-b"},{default:t(()=>{var l,C,R,S,T,q;return[i("p",oe,[e(r,null,{default:t(()=>[u(" mdi-phone ")]),_:1}),u(" "+m((l=n.value)==null?void 0:l.phone_number)+" | ",1),e(r,null,{default:t(()=>[u(" mdi-email ")]),_:1}),u(" "+m((C=n.value)==null?void 0:C.email),1)]),i("p",ne,[e(r,null,{default:t(()=>[u(" mdi-school ")]),_:1}),u(" "+m((R=n.value)==null?void 0:R.career_name)+" | "+m((S=n.value)==null?void 0:S.student_code),1)]),i("p",ue,[e(r,null,{default:t(()=>[u(" mdi-human-male ")]),_:1}),u(" "+m((T=n.value)==null?void 0:T.father_name),1)]),i("p",se,[e(r,null,{default:t(()=>[u(" mdi-human-female ")]),_:1}),u(" "+m((q=n.value)==null?void 0:q.mother_name),1)])]}),_:1}),e(z,{modelValue:f.value,"onUpdate:modelValue":o[6]||(o[6]=l=>f.value=l)},{default:t(()=>[e(B,{value:"attention"},{default:t(()=>[e($,{ref_key:"formRef",ref:x,onSubmit:Q(E,["prevent"])},{default:t(()=>[e(j,{justify:"center"},{default:t(()=>[e(_,{cols:"10",md:"8"},{default:t(()=>[e(A,null,{default:t(()=>[e(j,{justify:"center"},{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(D,{modelValue:s.value.email,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value.email=l),label:"Correo",rules:[p(w),p(te)],hint:"El correo es obligatorio, para el envio de correos, asegurese de que sea correcto.","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),e(_,{cols:"12",md:"8"},{default:t(()=>[e(N,{modelValue:s.value.type_attention_id,"onUpdate:modelValue":o[2]||(o[2]=l=>s.value.type_attention_id=l),items:h.value,label:"Tipo de Atencion","return-object":!1,rules:[p(w)]},null,8,["modelValue","items","rules"])]),_:1}),e(_,{cols:"12",md:"4"},{default:t(()=>[e(D,{modelValue:s.value.report_number,"onUpdate:modelValue":o[3]||(o[3]=l=>s.value.report_number=l),label:"Nro de Reporte",rules:[p(w)]},null,8,["modelValue","rules"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(H,{modelValue:s.value.description,"onUpdate:modelValue":o[4]||(o[4]=l=>s.value.description=l),label:"Descripcion",rules:[p(w)]},null,8,["modelValue","rules"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(N,{modelValue:s.value.derivate_to,"onUpdate:modelValue":o[5]||(o[5]=l=>s.value.derivate_to=l),items:U.value,label:"Derivar a",chips:"",multiple:"","return-object":!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(k,{color:"primary",type:"button",link:"",to:"/a/attentions"},{default:t(()=>[u(" Volver ")]),_:1}),e(M),e(k,{color:"primary",type:"submit",variant:"flat",loading:y.value},{default:t(()=>[u(" Guardar atenciÃ³n ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(B,{value:"history"},{default:t(()=>{var l;return[e(ee,{document:(l=n.value)==null?void 0:l.student_code,person:n.value,person_type:"001"},null,8,["document","person"])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{fe as default};
