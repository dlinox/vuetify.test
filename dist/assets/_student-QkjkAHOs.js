import{d as z,i as E,b as r,r as l,o as F,c as J,w as t,a as e,h as m,g as u,t as i,f as K,u as V}from"./index-BFgRTA9O.js";import{l as L,m as P,e as Q,f as W}from"./index-chXZFGms.js";import{A as C}from"./index-DJh3hycU.js";import{_ as X}from"./ListHistoy.vue_vue_type_script_setup_true_lang-B0YdyKor.js";import{r as y}from"./ruleUtils-B_kFGKyT.js";import"./data-table.constants-C9jLg9DU.js";const Y=m("small",null,"Nueva Atencion",-1),Z=m("small",null,"Historial",-1),ee={class:"mb-3"},_e=z({__name:"_student",setup(te){const S=E(),c=r("attention"),w=r([]),x=r([]),s=r(null),n=r({...C}),b=r(null),T=async()=>{var _,v,p;const{valid:A}=await((_=b.value)==null?void 0:_.validate());if(!A)return;let a={...n.value,person_id:(v=s.value)==null?void 0:v.id};await L(a,"001"),(p=b.value)==null||p.reset(),n.value={...C}};return(async()=>{s.value=await P(S.params.document),w.value=await Q(),x.value=await W()})(),(A,a)=>{const _=l("v-tab"),v=l("v-tabs"),p=l("v-toolbar"),f=l("v-icon"),I=l("v-card-title"),U=l("v-card-text"),g=l("v-combobox"),d=l("v-col"),h=l("v-text-field"),q=l("v-textarea"),D=l("v-row"),N=l("v-btn"),G=l("v-spacer"),H=l("v-card-actions"),M=l("v-form"),j=l("v-tabs-window-item"),O=l("v-tabs-window"),$=l("v-card");return F(),J($,null,{default:t(()=>[e(p,{density:"compact"},{default:t(()=>[e(v,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=o=>c.value=o)},{default:t(()=>[e(_,{value:"attention"},{default:t(()=>[Y]),_:1}),e(_,{value:"history"},{default:t(()=>[Z]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(I,null,{default:t(()=>{var o;return[m("small",null,[e(f,{class:"mb-1"},{default:t(()=>[u(" mdi-account ")]),_:1}),u(" "+i((o=s.value)==null?void 0:o.full_name),1)])]}),_:1}),e(U,{class:"border-b"},{default:t(()=>{var o,k,B,R;return[m("p",ee,[e(f,null,{default:t(()=>[u(" mdi-phone ")]),_:1}),u(" "+i((o=s.value)==null?void 0:o.phone_number)+" | ",1),e(f,null,{default:t(()=>[u(" mdi-email ")]),_:1}),u(" "+i((k=s.value)==null?void 0:k.email),1)]),m("p",null,[e(f,null,{default:t(()=>[u(" mdi-school ")]),_:1}),u(" "+i((B=s.value)==null?void 0:B.career_name)+" | "+i((R=s.value)==null?void 0:R.student_code),1)])]}),_:1}),e(O,{modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=o=>c.value=o)},{default:t(()=>[e(j,{value:"attention"},{default:t(()=>[e(M,{ref_key:"formRef",ref:b,onSubmit:K(T,["prevent"])},{default:t(()=>[e(D,{justify:"center"},{default:t(()=>[e(d,{cols:"10",md:"8"},{default:t(()=>[e(U,null,{default:t(()=>[e(D,{justify:"center"},{default:t(()=>[e(d,{cols:"12",md:"8"},{default:t(()=>[e(g,{modelValue:n.value.type_attention_id,"onUpdate:modelValue":a[1]||(a[1]=o=>n.value.type_attention_id=o),items:w.value,label:"Tipo de Atencion","return-object":!1,rules:[V(y)]},null,8,["modelValue","items","rules"])]),_:1}),e(d,{cols:"12",md:"4"},{default:t(()=>[e(h,{modelValue:n.value.report_number,"onUpdate:modelValue":a[2]||(a[2]=o=>n.value.report_number=o),label:"Nro de Reporte",rules:[V(y)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(q,{modelValue:n.value.description,"onUpdate:modelValue":a[3]||(a[3]=o=>n.value.description=o),label:"Descripcion",rules:[V(y)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(g,{modelValue:n.value.derivate_to,"onUpdate:modelValue":a[4]||(a[4]=o=>n.value.derivate_to=o),items:x.value,label:"Derivar a",chips:"",multiple:"","return-object":!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(N,{color:"primary",type:"button",link:"",to:"/a/attentions"},{default:t(()=>[u(" Volver ")]),_:1}),e(G),e(N,{color:"primary",type:"submit",variant:"flat"},{default:t(()=>[u(" Guardar atenciÃ³n ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(j,{value:"history"},{default:t(()=>{var o;return[e(X,{document:(o=s.value)==null?void 0:o.student_code,person:s.value,person_type:"001"},null,8,["document","person"])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{_e as default};
