import{d as B,i as I,b as m,r as t,o as r,e as x,c,w as a,a as o,h as l,t as u,f as U,u as L,F as M,j as T,g as E}from"./index-BRh64UmY.js";import{r as F}from"./ruleUtils-B_kFGKyT.js";import{r as P,g as R}from"./index-DkboTV6d.js";import"./data-table.constants-C9jLg9DU.js";const D={class:"d-flex align-center justify-center h-screen"},G=l("div",{class:"mb-6 text-center"},[l("h3",null,"Califica tu experiencia"),l("small",null," Ayúdanos a mejorar ")],-1),Q=l("div",{class:"mb-6 text-center"},[l("h3",null,"Califica tu experiencia"),l("small",null," Ayúdanos a mejorar ")],-1),Y=l("span",null,"La encuesta no existe, el enlace no es válido o ha expirado.",-1),X=B({__name:"_survey",setup(z){const g=I(),e=m({score:null,comments:""}),k=[{title:"Muy Satisfecho",value:5},{title:"Satisfecho",value:4},{title:"Neutral",value:3},{title:"Insatisfecho",value:2},{title:"Muy Insatisfecho",value:1}],v=m(!1),d=m(!1),w=async()=>{v.value=!0;try{await P(e.value,g.params.token)&&(s.value.score=e.value.score,s.value.comments=e.value.comments)}catch(_){console.error(_)}finally{v.value=!1}},s=m(null);return(async()=>{d.value=!0,s.value=await R(g.params.token),s.value&&(e.value.score=s.value.score,e.value.comments=s.value.comments),console.log(s),d.value=!1})(),(_,i)=>{const y=t("v-img"),p=t("v-card-item"),j=t("v-progress-circular"),h=t("v-card"),b=t("v-alert"),N=t("v-radio"),S=t("v-radio-group"),f=t("v-col"),V=t("v-textarea"),q=t("v-btn"),C=t("v-row"),A=t("v-form");return r(),x("div",D,[d.value?(r(),c(h,{key:0,elevation:"0",rounded:"lg"},{default:a(()=>[o(p,{class:""},{default:a(()=>[o(y,{src:"/sso-logo.jpg",alt:"UNAP",width:"150px",class:"mb-6 mx-auto"}),G]),_:1}),o(p,{class:"d-flex align-center justify-center"},{default:a(()=>[o(j,{indeterminate:"",color:"black"})]),_:1})]),_:1})):(r(),c(h,{key:1,elevation:"0",rounded:"lg","max-width":"500",class:"bg-white"},{default:a(()=>[o(p,null,{default:a(()=>[o(y,{src:"/sso-logo.jpg",alt:"UNAP",width:"150px",class:"mb-6 mx-auto"}),Q,s.value?s.value.score?(r(),c(b,{key:1,type:"info",variant:"tonal"},{default:a(()=>[l("span",null," Ya has respondido la encuesta, gracias por tu tiempo. "+u(e.value.score===5?"Nos alegra que estés muy satisfecho con nuestro servicio.":"")+" "+u(e.value.score===4?"Nos alegra que estés satisfecho con nuestro servicio.":"")+" "+u(e.value.score===3?"Gracias por tu respuesta. Tomamos nota para seguir mejorando.":"")+" "+u(e.value.score===2?"Lamentamos que no hayas quedado satisfecho. Trabajaremos en ello.":"")+" "+u(e.value.score===1?"Sentimos que tu experiencia no haya sido buena. ¡Queremos mejorar!":""),1)]),_:1})):(r(),c(A,{key:2,onSubmit:U(w,["prevent"]),ref:"formRef"},{default:a(()=>[o(C,null,{default:a(()=>[o(f,{cols:"12"},{default:a(()=>[o(S,{modelValue:e.value.score,"onUpdate:modelValue":i[0]||(i[0]=n=>e.value.score=n),label:"Nivel de Satisfacción",rules:[L(F)]},{default:a(()=>[(r(),x(M,null,T(k,n=>o(N,{key:n.value,label:n.title,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","rules"])]),_:1}),o(f,{cols:"12"},{default:a(()=>[o(V,{class:"w-auto",modelValue:e.value.comments,"onUpdate:modelValue":i[1]||(i[1]=n=>e.value.comments=n),label:"Comentarios (opcional)"},null,8,["modelValue"])]),_:1}),o(f,{cols:"12"},{default:a(()=>[o(q,{color:"black",block:"",loading:v.value,type:"submit"},{default:a(()=>[E(" Enviar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)):(r(),c(b,{key:0,type:"error",variant:"tonal"},{default:a(()=>[Y]),_:1}))]),_:1})]),_:1}))])}}});export{X as default};
