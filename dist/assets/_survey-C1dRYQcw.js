import{d as B,i as I,b as u,r as o,o as r,e as x,c as i,w as a,a as e,f as U,u as M,F as E,j as F,g as L,h as n}from"./index-WbBHlAeq.js";import{r as P}from"./ruleUtils-B_kFGKyT.js";import{r as R,g as q}from"./index-uEPbdDor.js";import"./data-table.constants-B0R7xaSt.js";const T={class:"d-flex align-center justify-center h-screen"},z=n("div",{class:"mb-6 text-center"},[n("h3",null,"Califica tu experiencia"),n("small",null," Ayúdanos a mejorar ")],-1),D=n("div",{class:"mb-6 text-center"},[n("h3",null,"Califica tu experiencia"),n("small",null," Ayúdanos a mejorar ")],-1),G=n("span",null,"La encuesta no existe, el enlace no es válido o ha expirado.",-1),X=B({__name:"_survey",setup(H){const f=I(),t=u({score:null,comments:""}),b=[{title:"Muy Satisfecho",value:5},{title:"Satisfecho",value:4},{title:"Neutral",value:3},{title:"Insatisfecho",value:2},{title:"Muy Insatisfecho",value:1}],v=u(!1),m=u(!1),h=async()=>{v.value=!0;try{await R(t.value,f.params.token)}catch(p){console.error(p)}finally{v.value=!1}},s=u(null);return(async()=>{m.value=!0,s.value=await q(f.params.token),s.value&&(t.value.score=s.value.score,t.value.comments=s.value.comments),console.log(s),m.value=!1})(),(p,c)=>{const g=o("v-img"),_=o("v-card-item"),k=o("v-progress-circular"),y=o("v-card"),w=o("v-alert"),V=o("v-radio"),j=o("v-radio-group"),d=o("v-col"),N=o("v-textarea"),S=o("v-btn"),C=o("v-row"),A=o("v-form");return r(),x("div",T,[m.value?(r(),i(y,{key:0,elevation:"0",rounded:"lg"},{default:a(()=>[e(_,{class:""},{default:a(()=>[e(g,{src:"/sso-logo.jpg",alt:"UNAP",width:"150px",class:"mb-6 mx-auto"}),z]),_:1}),e(_,{class:"d-flex align-center justify-center"},{default:a(()=>[e(k,{indeterminate:"",color:"black"})]),_:1})]),_:1})):(r(),i(y,{key:1,elevation:"0",rounded:"lg","max-width":"500",class:"bg-white"},{default:a(()=>[e(_,null,{default:a(()=>[e(g,{src:"/sso-logo.jpg",alt:"UNAP",width:"150px",class:"mb-6 mx-auto"}),D,s.value?(r(),i(A,{key:1,onSubmit:U(h,["prevent"]),ref:"formRef"},{default:a(()=>[e(C,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(j,{modelValue:t.value.score,"onUpdate:modelValue":c[0]||(c[0]=l=>t.value.score=l),label:"Nivel de Satisfacción",rules:[M(P)]},{default:a(()=>[(r(),x(E,null,F(b,l=>e(V,{key:l.value,label:l.title,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(N,{class:"w-auto",modelValue:t.value.comments,"onUpdate:modelValue":c[1]||(c[1]=l=>t.value.comments=l),label:"Comentarios (opcional)"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(S,{color:"black",block:"",loading:v.value,type:"submit"},{default:a(()=>[L(" Enviar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)):(r(),i(w,{key:0,type:"error",variant:"tonal"},{default:a(()=>[G]),_:1}))]),_:1})]),_:1}))])}}});export{X as default};
