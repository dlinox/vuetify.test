import{d as B,i as I,b as m,r as t,o as n,e as x,c,w as e,a,h as l,t as u,f as U,u as L,F as M,j as T,g as E}from"./index-EDV8Mj28.js";import{r as F}from"./ruleUtils-B_kFGKyT.js";import{r as P,g as R}from"./index-D6UDcWmE.js";import"./data-table.constants-C9jLg9DU.js";const D={class:"d-flex align-center justify-center h-screen"},G=l("div",{class:"mb-6 text-center"},[l("h3",null,"Califica tu experiencia"),l("small",null," Ayúdanos a mejorar ")],-1),Q=l("div",{class:"mb-6 text-center"},[l("h3",null,"Califica tu experiencia"),l("small",null," Ayúdanos a mejorar ")],-1),Y=l("span",null,"La encuesta no existe, el enlace no es válido o ha expirado.",-1),X=B({__name:"_survey",setup(z){const f=I(),o=m({score:null,comments:""}),k=[{title:"Muy Satisfecho",value:5},{title:"Satisfecho",value:4},{title:"Neutral",value:3},{title:"Insatisfecho",value:2},{title:"Muy Insatisfecho",value:1}],v=m(!1),d=m(!1),w=async()=>{v.value=!0;try{await P(o.value,f.params.token)}catch(g){console.error(g)}finally{v.value=!1}},r=m(null);return(async()=>{d.value=!0,r.value=await R(f.params.token),r.value&&(o.value.score=r.value.score,o.value.comments=r.value.comments),console.log(r),d.value=!1})(),(g,i)=>{const y=t("v-img"),_=t("v-card-item"),j=t("v-progress-circular"),h=t("v-card"),b=t("v-alert"),N=t("v-radio"),S=t("v-radio-group"),p=t("v-col"),V=t("v-textarea"),q=t("v-btn"),C=t("v-row"),A=t("v-form");return n(),x("div",D,[d.value?(n(),c(h,{key:0,elevation:"0",rounded:"lg"},{default:e(()=>[a(_,{class:""},{default:e(()=>[a(y,{src:"/sso-logo.jpg",alt:"UNAP",width:"150px",class:"mb-6 mx-auto"}),G]),_:1}),a(_,{class:"d-flex align-center justify-center"},{default:e(()=>[a(j,{indeterminate:"",color:"black"})]),_:1})]),_:1})):(n(),c(h,{key:1,elevation:"0",rounded:"lg","max-width":"500",class:"bg-white"},{default:e(()=>[a(_,null,{default:e(()=>[a(y,{src:"/sso-logo.jpg",alt:"UNAP",width:"150px",class:"mb-6 mx-auto"}),Q,r.value?o.value.score?(n(),c(b,{key:1,type:"info",variant:"tonal"},{default:e(()=>[l("span",null," Ya has respondido la encuesta, gracias por tu tiempo. "+u(o.value.score===5?"Nos alegra que estés muy satisfecho con nuestro servicio.":"")+" "+u(o.value.score===4?"Nos alegra que estés satisfecho con nuestro servicio.":"")+" "+u(o.value.score===3?"Gracias por tu respuesta. Tomamos nota para seguir mejorando.":"")+" "+u(o.value.score===2?"Lamentamos que no hayas quedado satisfecho. Trabajaremos en ello.":"")+" "+u(o.value.score===1?"Sentimos que tu experiencia no haya sido buena. ¡Queremos mejorar!":""),1)]),_:1})):(n(),c(A,{key:2,onSubmit:U(w,["prevent"]),ref:"formRef"},{default:e(()=>[a(C,null,{default:e(()=>[a(p,{cols:"12"},{default:e(()=>[a(S,{modelValue:o.value.score,"onUpdate:modelValue":i[0]||(i[0]=s=>o.value.score=s),label:"Nivel de Satisfacción",rules:[L(F)]},{default:e(()=>[(n(),x(M,null,T(k,s=>a(N,{key:s.value,label:s.title,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","rules"])]),_:1}),a(p,{cols:"12"},{default:e(()=>[a(V,{class:"w-auto",modelValue:o.value.comments,"onUpdate:modelValue":i[1]||(i[1]=s=>o.value.comments=s),label:"Comentarios (opcional)"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12"},{default:e(()=>[a(q,{color:"black",block:"",loading:v.value,type:"submit"},{default:e(()=>[E(" Enviar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)):(n(),c(b,{key:0,type:"error",variant:"tonal"},{default:e(()=>[Y]),_:1}))]),_:1})]),_:1}))])}}});export{X as default};
