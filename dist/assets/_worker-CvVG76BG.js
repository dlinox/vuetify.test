import{d as $,i as z,b as i,r as a,o as J,c as K,w as t,a as e,h as f,t as m,g as r,f as L,u as p}from"./index-B0wldPuQ.js";import{_ as P}from"./ListHistoy.vue_vue_type_script_setup_true_lang-e2c7ApC2.js";import{k as Q,l as X,o as F,d as Y,e as Z}from"./index-C9isLjBv.js";import{A as ee}from"./index-D7Wm7ZK5.js";import{r as x,e as te}from"./ruleUtils-B_kFGKyT.js";import"./data-table.constants-C9jLg9DU.js";const oe=f("small",null,"Nueva Atencion",-1),le=f("small",null,"Historial",-1),ae={class:"mb-2"},ne={class:"mb-2"},ve=$({__name:"_worker",setup(ue){const k=z(),b=i("attention"),U=i([]),B=i([]),n=i(null),g=i(null),u=i({...ee}),A=i(!1),I=async _=>{u.value.report_number=await Q(_)},S=async()=>{var s,y,V,w;const{valid:_}=await((s=g.value)==null?void 0:s.validate());if(!_)return;A.value=!0;let l={...u.value,person_id:(y=n.value)==null?void 0:y.id,person_type:"003"};await X(l,"003"),(V=g.value)==null||V.reset(),n.value=await F(k.params.document),u.value.email=((w=n.value)==null?void 0:w.email)||"",A.value=!1};return(async()=>{var l;n.value=await F(k.params.document),(await Y()).filter(s=>{s.type==="003"&&U.value.push(s)}),B.value=await Z(),u.value.email=((l=n.value)==null?void 0:l.email)||""})(),(_,l)=>{const s=a("v-tab"),y=a("v-tabs"),V=a("v-toolbar"),w=a("v-card-title"),N=a("v-icon"),D=a("v-card-text"),j=a("v-text-field"),d=a("v-col"),C=a("v-combobox"),E=a("v-textarea"),R=a("v-row"),T=a("v-btn"),G=a("v-spacer"),H=a("v-card-actions"),M=a("v-form"),h=a("v-tabs-window-item"),O=a("v-tabs-window"),W=a("v-card");return J(),K(W,null,{default:t(()=>[e(V,null,{default:t(()=>[e(y,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=o=>b.value=o)},{default:t(()=>[e(s,{value:"attention"},{default:t(()=>[oe]),_:1}),e(s,{value:"history"},{default:t(()=>[le]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:t(()=>{var o,c,v;return[f("small",null,m((o=n.value)==null?void 0:o.name)+" "+m((c=n.value)==null?void 0:c.paternal_surname)+" "+m((v=n.value)==null?void 0:v.maternal_surname),1)]}),_:1}),e(D,{class:"border-b"},{default:t(()=>{var o,c,v,q;return[f("p",ae,[e(N,null,{default:t(()=>[r(" mdi-phone ")]),_:1}),r(" "+m((o=n.value)==null?void 0:o.phone_number)+" | ",1),e(N,null,{default:t(()=>[r(" mdi-email ")]),_:1}),r(" "+m((c=n.value)==null?void 0:c.email),1)]),f("p",ne,[e(N,null,{default:t(()=>[r(" mdi-school ")]),_:1}),r(" "+m((v=n.value)==null?void 0:v.office_name)+" | "+m((q=n.value)==null?void 0:q.code),1)])]}),_:1}),e(O,{modelValue:b.value,"onUpdate:modelValue":l[6]||(l[6]=o=>b.value=o)},{default:t(()=>[e(h,{value:"attention"},{default:t(()=>[e(M,{ref_key:"formRef",ref:g,onSubmit:L(S,["prevent"])},{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(d,{cols:"10",md:"8"},{default:t(()=>[e(D,null,{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(j,{modelValue:u.value.email,"onUpdate:modelValue":l[1]||(l[1]=o=>u.value.email=o),label:"Correo",rules:[p(x),p(te)],hint:"El correo es obligatorio, para el envio de correos, asegurese de que sea correcto.","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12",md:"8"},{default:t(()=>[e(C,{modelValue:u.value.type_attention_id,"onUpdate:modelValue":[l[2]||(l[2]=o=>u.value.type_attention_id=o),I],items:U.value,label:"Tipo de Atencion","return-object":!1,rules:[p(x)]},null,8,["modelValue","items","rules"])]),_:1}),e(d,{cols:"12",md:"4"},{default:t(()=>[e(j,{modelValue:u.value.report_number,"onUpdate:modelValue":l[3]||(l[3]=o=>u.value.report_number=o),label:"Nro de Reporte",rules:[p(x)],readonly:""},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(E,{modelValue:u.value.description,"onUpdate:modelValue":l[4]||(l[4]=o=>u.value.description=o),label:"Descripcion",rules:[p(x)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(C,{modelValue:u.value.derivate_to,"onUpdate:modelValue":l[5]||(l[5]=o=>u.value.derivate_to=o),items:B.value,label:"Derivar a",chips:"",multiple:"","return-object":!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(T,{color:"primary",type:"button",link:"",to:"/a/attentions"},{default:t(()=>[r(" Volver ")]),_:1}),e(G),e(T,{color:"primary",type:"submit",variant:"flat",loading:A.value},{default:t(()=>[r(" Guardar atenciÃ³n ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(h,{value:"history"},{default:t(()=>{var o;return[e(P,{document:(o=n.value)==null?void 0:o.document_number,person:n.value,person_type:"003"},null,8,["document","person"])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{ve as default};
