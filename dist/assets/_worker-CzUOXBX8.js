import{d as $,i as z,b as r,r as l,o as F,c as J,w as t,a as e,h as f,t as i,g as s,f as K,u as p}from"./index-Dcw02d0D.js";import{_ as L}from"./ListHistoy.vue_vue_type_script_setup_true_lang-C6ZJiycN.js";import{l as P,o as I,e as Q,f as X}from"./index-rMzRKMBG.js";import{A as Y}from"./index-SwPYqIxQ.js";import{r as x,e as Z}from"./ruleUtils-B_kFGKyT.js";import"./data-table.constants-C9jLg9DU.js";const ee=f("small",null,"Nueva Atencion",-1),te=f("small",null,"Historial",-1),oe={class:"mb-2"},le={class:"mb-2"},_e=$({__name:"_worker",setup(ae){const A=z(),b=r("attention"),D=r([]),N=r([]),n=r(null),g=r(null),u=r({...Y}),U=r(!1),S=async()=>{var _,V,w,y;const{valid:d}=await((_=g.value)==null?void 0:_.validate());if(!d)return;U.value=!0;let a={...u.value,person_id:(V=n.value)==null?void 0:V.id,person_type:"003"};await P(a,"003"),(w=g.value)==null||w.reset(),n.value=await I(A.params.document),u.value.email=((y=n.value)==null?void 0:y.email)||"",U.value=!1};return(async()=>{var d;n.value=await I(A.params.document),D.value=await Q(),N.value=await X(),u.value.email=((d=n.value)==null?void 0:d.email)||""})(),(d,a)=>{const _=l("v-tab"),V=l("v-tabs"),w=l("v-toolbar"),y=l("v-card-title"),k=l("v-icon"),j=l("v-card-text"),B=l("v-text-field"),m=l("v-col"),C=l("v-combobox"),E=l("v-textarea"),R=l("v-row"),T=l("v-btn"),G=l("v-spacer"),H=l("v-card-actions"),M=l("v-form"),h=l("v-tabs-window-item"),O=l("v-tabs-window"),W=l("v-card");return F(),J(W,null,{default:t(()=>[e(w,null,{default:t(()=>[e(V,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=o=>b.value=o)},{default:t(()=>[e(_,{value:"attention"},{default:t(()=>[ee]),_:1}),e(_,{value:"history"},{default:t(()=>[te]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>{var o,c,v;return[f("small",null,i((o=n.value)==null?void 0:o.name)+" "+i((c=n.value)==null?void 0:c.paternal_surname)+" "+i((v=n.value)==null?void 0:v.maternal_surname),1)]}),_:1}),e(j,{class:"border-b"},{default:t(()=>{var o,c,v,q;return[f("p",oe,[e(k,null,{default:t(()=>[s(" mdi-phone ")]),_:1}),s(" "+i((o=n.value)==null?void 0:o.phone_number)+" | ",1),e(k,null,{default:t(()=>[s(" mdi-email ")]),_:1}),s(" "+i((c=n.value)==null?void 0:c.email),1)]),f("p",le,[e(k,null,{default:t(()=>[s(" mdi-school ")]),_:1}),s(" "+i((v=n.value)==null?void 0:v.office_name)+" | "+i((q=n.value)==null?void 0:q.code),1)])]}),_:1}),e(O,{modelValue:b.value,"onUpdate:modelValue":a[6]||(a[6]=o=>b.value=o)},{default:t(()=>[e(h,{value:"attention"},{default:t(()=>[e(M,{ref_key:"formRef",ref:g,onSubmit:K(S,["prevent"])},{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(m,{cols:"10",md:"8"},{default:t(()=>[e(j,null,{default:t(()=>[e(R,{justify:"center"},{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[e(B,{modelValue:u.value.email,"onUpdate:modelValue":a[1]||(a[1]=o=>u.value.email=o),label:"Correo",rules:[p(x),p(Z)],hint:"El correo es obligatorio, para el envio de correos, asegurese de que sea correcto.","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",md:"8"},{default:t(()=>[e(C,{modelValue:u.value.type_attention_id,"onUpdate:modelValue":a[2]||(a[2]=o=>u.value.type_attention_id=o),items:D.value,label:"Tipo de Atencion","return-object":!1,rules:[p(x)]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"4"},{default:t(()=>[e(B,{modelValue:u.value.report_number,"onUpdate:modelValue":a[3]||(a[3]=o=>u.value.report_number=o),label:"Nro de Reporte",rules:[p(x)]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(E,{modelValue:u.value.description,"onUpdate:modelValue":a[4]||(a[4]=o=>u.value.description=o),label:"Descripcion",rules:[p(x)]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(C,{modelValue:u.value.derivate_to,"onUpdate:modelValue":a[5]||(a[5]=o=>u.value.derivate_to=o),items:N.value,label:"Derivar a",chips:"",multiple:"","return-object":!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(T,{color:"primary",type:"button",link:"",to:"/a/attentions"},{default:t(()=>[s(" Volver ")]),_:1}),e(G),e(T,{color:"primary",type:"submit",variant:"flat",loading:U.value},{default:t(()=>[s(" Guardar atenciÃ³n ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(h,{value:"history"},{default:t(()=>{var o;return[e(L,{document:(o=n.value)==null?void 0:o.document_number,person:n.value,person_type:"003"},null,8,["document","person"])]}),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{_e as default};
