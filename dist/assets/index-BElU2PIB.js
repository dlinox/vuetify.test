import{D as E}from"./data-table.constants-C9jLg9DU.js";import{v as N,d as $,b as f,r as o,o as B,c as A,w as a,y as O,a as t,f as T,u as d,l as h,m as q,n as M,g as R,t as F,B as G}from"./index-DwRoDD7B.js";import{r as U,d as L,a as j,e as z}from"./ruleUtils-DvAtGyw3.js";import{c as H}from"./careers-DItZM9B3.js";const J=async m=>{try{let u=localStorage.getItem("token");return(await N(u).post("/professors/items",m)).data}catch(u){return console.error(u),E}},K=async m=>{try{let u=localStorage.getItem("token");return await N(u).post("/professors",m),!0}catch(u){return console.error(u),!1}},Q=async m=>{try{let u=localStorage.getItem("token");return await N(u).put(`/professors/${m.id}`,m),!0}catch(u){return console.error(u),!1}},D={id:null,code:null,name:"",paternal_surname:"",maternal_surname:"",document_type:"001",document_number:"",birthdate:"",phone_number:"",career_code:null,position_id:null,position_name:"",condition_id:null,condition_name:"",email:"",gender:"",status:!0},W=$({__name:"Form",props:{formState:{type:Object,default:()=>({})},careers:{type:Array,default:()=>[]}},emits:["onSuccess"],setup(m,{emit:u}){const v=u,_=f(!1),e=f({...D,...m.formState}),p=async c=>{_.value=!0,e.value.id?await Q(e.value)&&(e.value={...D},v("onSuccess"),c.value=!1):await K(e.value)&&(e.value={...D},v("onSuccess"),c.value=!1),_.value=!1};return(c,l)=>{const r=o("v-text-field"),i=o("v-col"),w=o("v-combobox"),g=o("v-switch"),x=o("v-row"),I=o("v-card-item"),V=o("v-btn"),S=o("v-spacer"),k=o("v-card-actions"),P=o("v-card"),C=o("v-form"),y=o("v-dialog");return B(),A(y,{"max-width":"700"},{activator:a(({props:n})=>[O(c.$slots,"btn",{activator:n})]),default:a(({isActive:n})=>[t(C,{onSubmit:T(s=>p(n),["prevent"])},{default:a(()=>[t(P,{title:e.value.id?"Editar":"Crear"},{default:a(()=>[t(I,null,{default:a(()=>[t(x,null,{default:a(()=>[t(i,{cols:"12",md:"6"},{default:a(()=>[t(r,{modelValue:e.value.document_number,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value.document_number=s),label:"DNI",rules:[d(U),d(L)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:a(()=>[t(r,{modelValue:e.value.code,"onUpdate:modelValue":l[1]||(l[1]=s=>e.value.code=s),label:"Código Trabajador"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12"},{default:a(()=>[t(r,{modelValue:e.value.name,"onUpdate:modelValue":l[2]||(l[2]=s=>e.value.name=s),label:"Nombre",rules:[d(U)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:a(()=>[t(r,{modelValue:e.value.paternal_surname,"onUpdate:modelValue":l[3]||(l[3]=s=>e.value.paternal_surname=s),label:"Apellido Paterno",rules:[d(j)(e.value.maternal_surname)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:a(()=>[t(r,{modelValue:e.value.maternal_surname,"onUpdate:modelValue":l[4]||(l[4]=s=>e.value.maternal_surname=s),label:"Apellido Materno",rules:[d(j)(e.value.paternal_surname)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:a(()=>[t(r,{modelValue:e.value.email,"onUpdate:modelValue":l[5]||(l[5]=s=>e.value.email=s),label:"Email",rules:[d(U),d(z)]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:a(()=>[t(w,{modelValue:e.value.career_code,"onUpdate:modelValue":l[6]||(l[6]=s=>e.value.career_code=s),items:m.careers,label:"Carrera",hint:"Selecciona la carrera a la que pertenece","persistent-hint":"","return-object":!1},null,8,["modelValue","items"])]),_:1}),t(i,{cols:"12"},{default:a(()=>[t(g,{label:e.value.status?"Activo":"Inactivo",modelValue:e.value.status,"onUpdate:modelValue":l[7]||(l[7]=s=>e.value.status=s),color:"blue-darken-4",inset:""},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(V,{text:"Cancel",onClick:s=>n.value=!1},null,8,["onClick"]),t(S),t(V,{text:"Guardar",color:"primary",type:"submit",loading:_.value},null,8,["loading"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onSubmit"])]),_:3})}}}),X=$({__name:"DataTable",setup(m){const u=[{title:"DNI",value:"document_number",sortable:!0},{title:"Nombre",sortable:!0,value:"name"},{title:"Apellido Paterno",sortable:!0,value:"paternal_surname"},{title:"Apellido Materno",sortable:!0,value:"maternal_surname"},{title:"Correo",sortable:!0,value:"email"},{title:"Escuela Profesional",value:"career_name"},{title:"Estado",sortable:!0,value:"status"},{title:"",value:"actions"}],v=H.map(l=>({title:l.name,value:l.code})),_=[{title:"Activo",value:!0},{title:"Inactivo",value:!1}],b=f(!1),e=f({page:1,itemsPerPage:10,search:"",filters:{},sortBy:[]}),p=f({...E}),c=async l=>{b.value=!0,console.log("options"),e.value={...e.value,...l,filters:{...e.value.filters}},p.value=await J(e.value),b.value=!1};return(l,r)=>{const i=o("v-btn"),w=o("v-text-field"),g=o("v-col"),x=o("v-select"),I=o("v-row"),V=o("v-card-item"),S=o("v-chip"),k=o("v-data-table-server"),P=o("v-card"),C=h("permission");return B(),A(P,null,{default:a(()=>{var y;return[t(V,null,{default:a(()=>[t(I,{justify:"space-between"},{default:a(()=>[t(g,{cols:"12",md:"5",class:"d-flex justify-end align-end"},{default:a(()=>[t(W,{onOnSuccess:r[0]||(r[0]=n=>c(e.value)),careers:d(v)},{btn:a(({activator:n})=>[q(t(i,M(n,{color:"primary",icon:"mdi-plus-circle-outline",class:"me-2"}),null,16),[[C,["professors.create"]]])]),_:1},8,["careers"]),t(w,{modelValue:e.value.search,"onUpdate:modelValue":r[1]||(r[1]=n=>e.value.search=n),label:"Buscar"},null,8,["modelValue"])]),_:1}),t(g,{cols:"12",md:"2"},{default:a(()=>[t(x,{modelValue:e.value.filters.status,"onUpdate:modelValue":[r[2]||(r[2]=n=>e.value.filters.status=n),r[3]||(r[3]=n=>c(e.value))],label:"Estado",items:_,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(k,{"items-per-page":e.value.itemsPerPage,"onUpdate:itemsPerPage":r[4]||(r[4]=n=>e.value.itemsPerPage=n),headers:u,items:(y=p.value)==null?void 0:y.data,"items-length":p.value.total,search:e.value.search,"multi-sort":"",loading:b.value,"item-value":"id","items-per-page-text":"Número de filas por página:","onUpdate:options":c},{"item.status":a(({item:n})=>[t(S,{color:n.status?"info":"error"},{default:a(()=>[R(F(n.status?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),"item.actions":a(({item:n})=>[G("",!0)]),_:1},8,["items-per-page","items","items-length","search","loading"])]}),_:1})}}}),ae=$({__name:"index",setup(m){return(u,v)=>(B(),A(X))}});export{ae as default};
