import{c as W}from"./careers-S8zIYKBd.js";import{a as k,_ as R}from"./DeleteItem.vue_vue_type_script_setup_true_lang-CUicmEiN.js";import{D as j}from"./data-table.constants-C9jLg9DU.js";import{h as S,i as F,e as J,f as q,j as z}from"./index-rMzRKMBG.js";import{E as B}from"./index-Cl_3GKjn.js";import{d as $,b as m,r as s,o as E,c as C,w as a,a as e,g as y,u as O,t as G,m as I,e as K,F as L}from"./index-Dcw02d0D.js";import"./index-SwPYqIxQ.js";const M=$({__name:"DataTableStudent",props:{typeAttentions:{},offices:{},users:{},type:{}},setup(p){const f=p,c=m({datas:[],fileName:"reporte",type:"xlsx"}),x=()=>{var n;c.value.datas=[{sheetData:(n=d.value)==null?void 0:n.data,sheetName:"Reporte",sheetFilter:["report_number","type_attention_name","person_document","person_code","person_name","unit_name","created_at"],sheetHeader:["N° Reporte","Tipo de atención","Documento","Código","Nombre","Unidad","Fecha"]}],new B(c.value).saveExcel()},V=[{title:"N° Reporte",value:"report_number"},{title:"Estudiante",value:"person_name"},{title:"Documento",value:"person_document"},{title:"Código",value:"person_code"},{title:"Unidad",value:"unit_name"},{title:"Tipo de atención",value:"type_attention_name"},{title:"Usuario",value:"user_id"},{title:"Fecha",value:"created_at"},{title:"",value:"actions"}],b=m(W.map(t=>({value:t.code,title:t.name}))),i=m(!1),o=m({page:1,itemsPerPage:10,search:"",filters:{},sortBy:[]}),d=m({...j}),r=async t=>{i.value=!0,t.value={...t.value,...t},d.value=await F(t.value,f.type),i.value=!1};return(t,n)=>{const v=s("v-icon"),_=s("v-btn"),P=s("v-text-field"),w=s("v-col"),A=s("v-select"),N=s("v-row"),T=s("v-card-item"),D=s("v-data-table-server"),U=s("v-card");return E(),C(U,null,{default:a(()=>{var u;return[e(T,null,{default:a(()=>[e(N,{justify:"space-between"},{default:a(()=>[e(w,{cols:"12",md:"5",class:"d-flex justify-end align-end"},{default:a(()=>[e(_,{icon:"",onClick:x,class:"mr-2",color:"green",variant:"tonal"},{default:a(()=>[e(v,null,{default:a(()=>[y("mdi-file-excel")]),_:1})]),_:1}),e(_,{icon:"",onClick:n[0]||(n[0]=l=>{var g;return O(S)((g=d.value)==null?void 0:g.data)}),class:"mr-2",color:"red",variant:"tonal"},{default:a(()=>[e(v,null,{default:a(()=>[y("mdi-file-pdf-box")]),_:1})]),_:1}),e(P,{modelValue:o.value.search,"onUpdate:modelValue":n[1]||(n[1]=l=>o.value.search=l),label:"Buscar"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12",md:"7",class:"d-flex justify-end align-end"},{default:a(()=>[e(A,{modelValue:o.value.filters.type_attention_id,"onUpdate:modelValue":[n[2]||(n[2]=l=>o.value.filters.type_attention_id=l),n[3]||(n[3]=l=>r(o.value))],items:t.typeAttentions,label:"Tipo de atención",dense:"",outlined:"",clearable:"",class:"mr-2"},null,8,["modelValue","items"]),e(A,{modelValue:o.value.filters.unit_code,"onUpdate:modelValue":[n[4]||(n[4]=l=>o.value.filters.unit_code=l),n[5]||(n[5]=l=>r(o.value))],items:b.value,label:"Carrera",dense:"",outlined:"",clearable:"",class:"mr-2"},null,8,["modelValue","items"]),e(A,{modelValue:o.value.filters.user_id,"onUpdate:modelValue":[n[6]||(n[6]=l=>o.value.filters.user_id=l),n[7]||(n[7]=l=>r(o.value))],items:t.users,label:"Usuario",dense:"",outlined:"",clearable:"",class:"mr-2"},null,8,["modelValue","items"]),e(_,{color:"primary",onClick:n[8]||(n[8]=l=>r(o.value)),loading:i.value,disabled:i.value,icon:"",variant:"tonal"},{default:a(()=>[e(v,null,{default:a(()=>[y("mdi-refresh")]),_:1})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1}),e(D,{"items-per-page":o.value.itemsPerPage,"onUpdate:itemsPerPage":n[10]||(n[10]=l=>o.value.itemsPerPage=l),headers:V,items:(u=d.value)==null?void 0:u.data,"items-length":d.value.total,search:o.value.search,"multi-sort":"",loading:i.value,"item-value":"id","items-per-page-text":"Número de filas por página:","onUpdate:options":r},{"item.user_id":a(({item:l})=>{var g;return[y(G((g=t.users.find(H=>String(H.value)===String(l.user_id)))==null?void 0:g.title),1)]}),"item.actions":a(({item:l})=>[e(k,{"form-state":l,onOnSuccess:n[9]||(n[9]=g=>r(o.value)),offices:t.offices,"type-attentions":t.typeAttentions,person_id:l.person_id,person_type:"001"},{btn:a(({activator:g})=>[e(_,I(g,{density:"comfortable",icon:"mdi-pencil",class:"text-button",variant:"tonal"}),null,16)]),_:2},1032,["form-state","offices","type-attentions","person_id"]),e(R,{id:l.id,onOnSuccess:r},null,8,["id"])]),_:1},8,["items-per-page","items","items-length","search","loading"])]}),_:1})}}}),Q=$({__name:"StudentReportWindow",props:{typeAttentions:{type:Array,default:()=>[]},offices:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]}},setup(p){return(f,c)=>(E(),C(M,{"type-attentions":p.typeAttentions,offices:p.offices,users:p.users,type:"001"},null,8,["type-attentions","offices","users"]))}}),X=$({__name:"DataTableProfessor",props:{typeAttentions:{},offices:{},users:{},type:{}},setup(p){const f=p,c=m({datas:[],fileName:"reporte",type:"xlsx"}),x=()=>{var n;c.value.datas=[{sheetData:(n=d.value)==null?void 0:n.data,sheetName:"Reporte",sheetFilter:["report_number","type_attention_name","person_document","person_code","person_name","unit_name","created_at"],sheetHeader:["N° Reporte","Tipo de atención","Documento","Código","Nombre","Unidad","Fecha"]}],new B(c.value).saveExcel()},V=[{title:"N° Reporte",value:"report_number"},{title:"Estudiante",value:"person_name"},{title:"Documento",value:"person_document"},{title:"Código",value:"person_code"},{title:"Unidad",value:"unit_name"},{title:"Tipo de atención",value:"type_attention_name"},{title:"Fecha",value:"created_at"},{title:"",value:"actions"}],b=m(W.map(t=>({value:t.code,title:t.name}))),i=m(!1),o=m({page:1,itemsPerPage:10,search:"",filters:{},sortBy:[]}),d=m({...j}),r=async t=>{i.value=!0,t.value={...t.value,...t},d.value=await F(t.value,f.type),i.value=!1};return(t,n)=>{const v=s("v-icon"),_=s("v-btn"),P=s("v-text-field"),w=s("v-col"),A=s("v-select"),N=s("v-row"),T=s("v-card-item"),D=s("v-data-table-server"),U=s("v-card");return E(),C(U,null,{default:a(()=>{var u;return[e(T,null,{default:a(()=>[e(N,{justify:"space-between"},{default:a(()=>[e(w,{cols:"12",md:"5",class:"d-flex justify-end align-end"},{default:a(()=>[e(_,{icon:"",onClick:x,class:"mr-2",color:"green",variant:"tonal"},{default:a(()=>[e(v,null,{default:a(()=>[y("mdi-file-excel")]),_:1})]),_:1}),e(_,{icon:"",onClick:n[0]||(n[0]=l=>{var g;return O(S)((g=d.value)==null?void 0:g.data)}),class:"mr-2",color:"red",variant:"tonal"},{default:a(()=>[e(v,null,{default:a(()=>[y("mdi-file-pdf-box")]),_:1})]),_:1}),e(P,{modelValue:o.value.search,"onUpdate:modelValue":n[1]||(n[1]=l=>o.value.search=l),label:"Buscar"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12",md:"7",class:"d-flex justify-end align-end"},{default:a(()=>[e(A,{modelValue:o.value.filters.type_attention_id,"onUpdate:modelValue":[n[2]||(n[2]=l=>o.value.filters.type_attention_id=l),n[3]||(n[3]=l=>r(o.value))],items:t.typeAttentions,label:"Tipo de atención",dense:"",outlined:"",clearable:"",class:"mr-2"},null,8,["modelValue","items"]),e(A,{modelValue:o.value.filters.unit_code,"onUpdate:modelValue":[n[4]||(n[4]=l=>o.value.filters.unit_code=l),n[5]||(n[5]=l=>r(o.value))],items:b.value,label:"Carrera",dense:"",outlined:"",clearable:"",class:"mr-2"},null,8,["modelValue","items"]),e(_,{color:"primary",onClick:n[6]||(n[6]=l=>r(o.value)),loading:i.value,disabled:i.value,icon:"",variant:"tonal"},{default:a(()=>[e(v,null,{default:a(()=>[y("mdi-refresh")]),_:1})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1}),e(D,{"items-per-page":o.value.itemsPerPage,"onUpdate:itemsPerPage":n[8]||(n[8]=l=>o.value.itemsPerPage=l),headers:V,items:(u=d.value)==null?void 0:u.data,"items-length":d.value.total,search:o.value.search,"multi-sort":"",loading:i.value,"item-value":"id","items-per-page-text":"Número de filas por página:","onUpdate:options":r},{"item.actions":a(({item:l})=>[e(k,{"form-state":l,onOnSuccess:n[7]||(n[7]=g=>r(o.value)),offices:t.offices,"type-attentions":t.typeAttentions,person_id:l.person_id,person_type:"001"},{btn:a(({activator:g})=>[e(_,I(g,{density:"comfortable",icon:"mdi-pencil",class:"text-button",variant:"tonal"}),null,16)]),_:2},1032,["form-state","offices","type-attentions","person_id"]),e(R,{id:l.id,onOnSuccess:r},null,8,["id"])]),_:1},8,["items-per-page","items","items-length","search","loading"])]}),_:1})}}}),Y=$({__name:"ProfessorReportWindow",props:{typeAttentions:{type:Array,default:()=>[]},offices:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]}},setup(p){return(f,c)=>(E(),C(X,{"type-attentions":p.typeAttentions,offices:p.offices,type:"002",users:p.users},null,8,["type-attentions","offices","users"]))}}),Z=$({__name:"DataTableWorker",props:{typeAttentions:{},offices:{},users:{},type:{}},setup(p){const f=p,c=m({datas:[],fileName:"reporte",type:"xlsx"}),x=()=>{var t;c.value.datas=[{sheetData:(t=o.value)==null?void 0:t.data,sheetName:"Reporte",sheetFilter:["report_number","type_attention_name","person_document","person_code","person_name","unit_name","created_at"],sheetHeader:["N° Reporte","Tipo de atención","Documento","Código","Nombre","Unidad","Fecha"]}],new B(c.value).saveExcel()},V=[{title:"N° Reporte",value:"report_number"},{title:"Trabajador",value:"person_name"},{title:"Documento",value:"person_document"},{title:"Código",value:"person_code"},{title:"Unidad",value:"unit_name"},{title:"Tipo de atención",value:"type_attention_name"},{title:"Fecha",value:"created_at"},{title:"",value:"actions"}],b=m(!1),i=m({page:1,itemsPerPage:10,search:"",filters:{},sortBy:[]}),o=m({...j}),d=async r=>{b.value=!0,r.value={...r.value,...r},o.value=await F(r.value,f.type),b.value=!1};return(r,t)=>{const n=s("v-icon"),v=s("v-btn"),_=s("v-text-field"),P=s("v-col"),w=s("v-select"),A=s("v-row"),N=s("v-card-item"),T=s("v-data-table-server"),D=s("v-card");return E(),C(D,null,{default:a(()=>{var U;return[e(N,null,{default:a(()=>[e(A,{justify:"space-between"},{default:a(()=>[e(P,{cols:"12",md:"5",class:"d-flex justify-end align-end"},{default:a(()=>[e(v,{icon:"",onClick:x,class:"mr-2",color:"green",variant:"tonal"},{default:a(()=>[e(n,null,{default:a(()=>[y("mdi-file-excel")]),_:1})]),_:1}),e(v,{icon:"",onClick:t[0]||(t[0]=u=>{var l;return O(S)((l=o.value)==null?void 0:l.data)}),class:"mr-2",color:"red",variant:"tonal"},{default:a(()=>[e(n,null,{default:a(()=>[y("mdi-file-pdf-box")]),_:1})]),_:1}),e(_,{modelValue:i.value.search,"onUpdate:modelValue":t[1]||(t[1]=u=>i.value.search=u),label:"Buscar"},null,8,["modelValue"])]),_:1}),e(P,{cols:"12",md:"7",class:"d-flex justify-end align-end"},{default:a(()=>[e(w,{modelValue:i.value.filters.type_attention_id,"onUpdate:modelValue":[t[2]||(t[2]=u=>i.value.filters.type_attention_id=u),t[3]||(t[3]=u=>d(i.value))],items:r.typeAttentions,label:"Tipo de atención",dense:"",outlined:"",clearable:"",class:"mr-2"},null,8,["modelValue","items"]),e(w,{modelValue:i.value.filters.user_id,"onUpdate:modelValue":[t[4]||(t[4]=u=>i.value.filters.user_id=u),t[5]||(t[5]=u=>d(i.value))],items:r.users,label:"Usuario",dense:"",outlined:"",clearable:"",class:"mr-2"},null,8,["modelValue","items"]),e(v,{color:"primary",onClick:t[6]||(t[6]=u=>d(i.value)),loading:b.value,disabled:b.value,icon:"",variant:"tonal"},{default:a(()=>[e(n,null,{default:a(()=>[y("mdi-refresh")]),_:1})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1}),e(T,{"items-per-page":i.value.itemsPerPage,"onUpdate:itemsPerPage":t[8]||(t[8]=u=>i.value.itemsPerPage=u),headers:V,items:(U=o.value)==null?void 0:U.data,"items-length":o.value.total,search:i.value.search,"multi-sort":"",loading:b.value,"item-value":"id","items-per-page-text":"Número de filas por página:","onUpdate:options":d},{"item.actions":a(({item:u})=>[e(k,{"form-state":u,onOnSuccess:t[7]||(t[7]=l=>d(i.value)),offices:r.offices,"type-attentions":r.typeAttentions,person_id:u.person_id,person_type:"001"},{btn:a(({activator:l})=>[e(v,I(l,{density:"comfortable",icon:"mdi-pencil",class:"text-button",variant:"tonal"}),null,16)]),_:2},1032,["form-state","offices","type-attentions","person_id"]),e(R,{id:u.id,onOnSuccess:d},null,8,["id"])]),_:1},8,["items-per-page","items","items-length","search","loading"])]}),_:1})}}}),h=$({__name:"WorkerReportWindow",props:{typeAttentions:{type:Array,default:()=>[]},offices:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]}},setup(p){return(f,c)=>(E(),C(Z,{"type-attentions":p.typeAttentions,offices:p.offices,users:p.users,type:"003"},null,8,["type-attentions","offices","users"]))}}),ee=$({__name:"DataTableAll",props:{typeAttentions:{},offices:{},users:{},type:{}},setup(p){const f=p,c=m({datas:[],fileName:"reporte",type:"xlsx"}),x=()=>{var t;c.value.datas=[{sheetData:(t=o.value)==null?void 0:t.data,sheetName:"Reporte",sheetFilter:["report_number","type_attention_name","person_document","person_code","person_name","unit_name","created_at"],sheetHeader:["N° Reporte","Tipo de atención","Documento","Código","Nombre","Unidad","Fecha"]}],new B(c.value).saveExcel()},V=[{title:"N° Reporte",value:"report_number"},{title:"Trabajador",value:"person_name"},{title:"Documento",value:"person_document"},{title:"Código",value:"person_code"},{title:"Unidad",value:"unit_name"},{title:"Tipo de atención",value:"type_attention_name"},{title:"Fecha",value:"created_at"},{title:"",value:"actions"}],b=m(!1),i=m({page:1,itemsPerPage:10,search:"",filters:{},sortBy:[]}),o=m({...j}),d=async r=>{b.value=!0,r.value={...r.value,...r},o.value=await F(r.value,f.type),b.value=!1};return(r,t)=>{const n=s("v-icon"),v=s("v-btn"),_=s("v-text-field"),P=s("v-col"),w=s("v-select"),A=s("v-row"),N=s("v-card-item"),T=s("v-data-table-server"),D=s("v-card");return E(),C(D,null,{default:a(()=>{var U;return[e(N,null,{default:a(()=>[e(A,{justify:"space-between"},{default:a(()=>[e(P,{cols:"12",md:"5",class:"d-flex justify-end align-end"},{default:a(()=>[e(v,{icon:"",onClick:x,class:"mr-2",color:"green",variant:"tonal"},{default:a(()=>[e(n,null,{default:a(()=>[y("mdi-file-excel")]),_:1})]),_:1}),e(v,{icon:"",onClick:t[0]||(t[0]=u=>{var l;return O(S)((l=o.value)==null?void 0:l.data)}),class:"mr-2",color:"red",variant:"tonal"},{default:a(()=>[e(n,null,{default:a(()=>[y("mdi-file-pdf-box")]),_:1})]),_:1}),e(_,{modelValue:i.value.search,"onUpdate:modelValue":t[1]||(t[1]=u=>i.value.search=u),label:"Buscar"},null,8,["modelValue"])]),_:1}),e(P,{cols:"12",md:"7",class:"d-flex justify-end align-end"},{default:a(()=>[e(w,{modelValue:i.value.filters.type_attention_id,"onUpdate:modelValue":[t[2]||(t[2]=u=>i.value.filters.type_attention_id=u),t[3]||(t[3]=u=>d(i.value))],items:r.typeAttentions,label:"Tipo de atención",dense:"",outlined:"",clearable:"",class:"mr-2"},null,8,["modelValue","items"]),e(w,{modelValue:i.value.filters.user_id,"onUpdate:modelValue":[t[4]||(t[4]=u=>i.value.filters.user_id=u),t[5]||(t[5]=u=>d(i.value))],items:r.users,label:"Usuario",dense:"",outlined:"",clearable:"",class:"mr-2"},null,8,["modelValue","items"]),e(v,{color:"primary",onClick:t[6]||(t[6]=u=>d(i.value)),loading:b.value,disabled:b.value,icon:"",variant:"tonal"},{default:a(()=>[e(n,null,{default:a(()=>[y("mdi-refresh")]),_:1})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1}),e(T,{"items-per-page":i.value.itemsPerPage,"onUpdate:itemsPerPage":t[8]||(t[8]=u=>i.value.itemsPerPage=u),headers:V,items:(U=o.value)==null?void 0:U.data,"items-length":o.value.total,search:i.value.search,"multi-sort":"",loading:b.value,"item-value":"id","items-per-page-text":"Número de filas por página:","onUpdate:options":d},{"item.actions":a(({item:u})=>[e(k,{"form-state":u,onOnSuccess:t[7]||(t[7]=l=>d(i.value)),offices:r.offices,"type-attentions":r.typeAttentions,person_id:u.person_id,person_type:"001"},{btn:a(({activator:l})=>[e(v,I(l,{density:"comfortable",icon:"mdi-pencil",class:"text-button",variant:"tonal"}),null,16)]),_:2},1032,["form-state","offices","type-attentions","person_id"]),e(R,{id:u.id,onOnSuccess:d},null,8,["id"])]),_:1},8,["items-per-page","items","items-length","search","loading"])]}),_:1})}}}),te=$({__name:"AllReportWindow",props:{typeAttentions:{type:Array,default:()=>[]},offices:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]}},setup(p){return(f,c)=>(E(),C(ee,{"type-attentions":p.typeAttentions,offices:p.offices,type:"000",users:p.users},null,8,["type-attentions","offices","users"]))}}),ue=$({__name:"index",setup(p){const f=m([]),c=m([]),x=m([]),V=m("stu, dent");return(async()=>{f.value=await J(),c.value=await q(),x.value=await z()})(),(i,o)=>{const d=s("v-tab"),r=s("v-tabs"),t=s("v-toolbar"),n=s("v-tabs-window-item"),v=s("v-tabs-window");return E(),K(L,null,[e(t,null,{default:a(()=>[e(r,{modelValue:V.value,"onUpdate:modelValue":o[0]||(o[0]=_=>V.value=_)},{default:a(()=>[e(d,{value:"student"},{default:a(()=>[y("Estudiantes")]),_:1}),e(d,{value:"professor"},{default:a(()=>[y("Docentes")]),_:1}),e(d,{value:"worker"},{default:a(()=>[y("Adminitrativos / CAS / Obras ")]),_:1}),e(d,{value:"all"},{default:a(()=>[y("Todo ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(v,{modelValue:V.value,"onUpdate:modelValue":o[1]||(o[1]=_=>V.value=_)},{default:a(()=>[e(n,{value:"student"},{default:a(()=>[e(Q,{"type-attentions":f.value,offices:c.value,users:x.value},null,8,["type-attentions","offices","users"])]),_:1}),e(n,{value:"professor"},{default:a(()=>[e(Y,{"type-attentions":f.value,offices:c.value,users:x.value},null,8,["type-attentions","offices","users"])]),_:1}),e(n,{value:"worker"},{default:a(()=>[e(h,{"type-attentions":f.value,offices:c.value,users:x.value},null,8,["type-attentions","offices","users"])]),_:1}),e(n,{value:"all"},{default:a(()=>[e(te,{"type-attentions":f.value,offices:c.value,users:x.value},null,8,["type-attentions","offices","users"])]),_:1})]),_:1},8,["modelValue"])],64)}}});export{ue as default};
