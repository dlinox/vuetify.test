import{a as N,D as O}from"./data-table.constants-B0R7xaSt.js";import{p as $,d as C,b as f,r as t,o as D,c as P,w as o,y as T,a as e,f as j,x as B,m as h,g as E,t as M}from"./index-Bckyz5mu.js";const A=async u=>{try{let l=localStorage.getItem("token");return(await $(l).post("/offices/items",u)).data}catch(l){return console.error(l),N}},F=async u=>{try{let l=localStorage.getItem("token");return await $(l).post("/offices",u),!0}catch(l){return console.error(l),!1}},G=async u=>{try{let l=localStorage.getItem("token");return await $(l).put(`/offices/${u.id}`,u),!0}catch(l){return console.error(l),!1}},U=C({__name:"Form",props:{formState:{type:Object,default:()=>({})}},emits:["onSuccess"],setup(u,{emit:l}){const d=l,m=f(!1),n=f({id:null,name:"",status:!0,...u.formState}),v=async _=>{m.value=!0,n.value.id?await G(n.value)&&(n.value={id:null,name:"",status:!0},d("onSuccess"),_.value=!1):await F(n.value)&&(n.value={id:null,name:"",status:!0},d("onSuccess"),_.value=!1),m.value=!1,n.value={id:null,name:"",status:!0}};return(_,c)=>{const s=t("v-text-field"),p=t("v-col"),y=t("v-switch"),b=t("v-row"),x=t("v-card-item"),g=t("v-btn"),S=t("v-spacer"),V=t("v-card-actions"),k=t("v-card"),I=t("v-form"),w=t("v-dialog");return D(),P(w,{"max-width":"500"},{activator:o(({props:a})=>[T(_.$slots,"btn",{activator:a})]),default:o(({isActive:a})=>[e(I,{onSubmit:j(i=>v(a),["prevent"])},{default:o(()=>[e(k,{title:n.value.id?"Editar":"Crear"},{default:o(()=>[e(x,null,{default:o(()=>[e(b,null,{default:o(()=>[e(p,{cols:"12"},{default:o(()=>[e(s,{modelValue:n.value.name,"onUpdate:modelValue":c[0]||(c[0]=i=>n.value.name=i),label:"Nombre"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(y,{label:n.value.status?"Activo":"Inactivo",modelValue:n.value.status,"onUpdate:modelValue":c[1]||(c[1]=i=>n.value.status=i),color:"blue-darken-4",inset:""},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:o(()=>[e(g,{text:"Cancel",onClick:i=>a.value=!1},null,8,["onClick"]),e(S),e(g,{text:"Guardar",color:"primary",type:"submit",loading:m.value},null,8,["loading"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onSubmit"])]),_:3})}}}),R=C({__name:"DataTable",setup(u){const l=[{title:"Nombre",sortable:!0,value:"name"},{title:"Estado",sortable:!0,value:"status"},{title:"",value:"actions"}],d=[{title:"Activo",value:!0},{title:"Inactivo",value:!1}],m=f(!1),r=f({...O}),n=f({...N}),v=async c=>{m.value=!0,c.value={...c.value,...c},n.value=await A(c.value),m.value=!1};return B(async()=>{await v(r.value)}),(c,s)=>{const p=t("v-btn"),y=t("v-text-field"),b=t("v-col"),x=t("v-select"),g=t("v-row"),S=t("v-card-item"),V=t("v-chip"),k=t("v-data-table-server"),I=t("v-card");return D(),P(I,null,{default:o(()=>{var w;return[e(S,null,{default:o(()=>[e(g,{justify:"space-between"},{default:o(()=>[e(b,{cols:"12",md:"5",class:"d-flex justify-end align-end"},{default:o(()=>[e(U,{onOnSuccess:s[0]||(s[0]=a=>v(r.value))},{btn:o(({activator:a})=>[e(p,h(a,{color:"primary",icon:"mdi-plus-circle-outline",class:"me-2"}),null,16)]),_:1}),e(y,{modelValue:r.value.search,"onUpdate:modelValue":s[1]||(s[1]=a=>r.value.search=a),label:"Buscar"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",md:"2"},{default:o(()=>[e(x,{modelValue:r.value.filters.status,"onUpdate:modelValue":[s[2]||(s[2]=a=>r.value.filters.status=a),s[3]||(s[3]=a=>v(r.value))],label:"Estado",items:d,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(k,{"items-per-page":r.value.itemsPerPage,"onUpdate:itemsPerPage":s[5]||(s[5]=a=>r.value.itemsPerPage=a),headers:l,items:(w=n.value)==null?void 0:w.data,"items-length":n.value.total,search:r.value.search,"multi-sort":"",loading:m.value,"item-value":"id","items-per-page-text":"Número de filas por página:","onUpdate:options":v},{"item.status":o(({item:a})=>[e(V,{color:a.status?"info":"error"},{default:o(()=>[E(M(a.status?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),"item.actions":o(({item:a})=>[e(U,{"form-state":a,onOnSuccess:s[4]||(s[4]=i=>v(r.value))},{btn:o(({activator:i})=>[e(p,h(i,{density:"comfortable",icon:"mdi-pencil",class:"text-button",variant:"tonal"}),null,16)]),_:2},1032,["form-state"])]),_:1},8,["items-per-page","items","items-length","search","loading"])]}),_:1})}}}),H=C({__name:"index",setup(u){return(l,d)=>(D(),P(R))}});export{H as default};
