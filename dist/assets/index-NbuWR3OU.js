import{D as j}from"./data-table.constants-C9jLg9DU.js";import{q as N,d as $,b as f,r as o,o as A,c as B,w as l,x as E,a as t,f as q,u as d,k as O,l as T,m as M,g as R,t as F,A as G}from"./index-Bt-WY-_A.js";import{r as U,d as L,a as h,e as z}from"./ruleUtils-B_kFGKyT.js";import{c as H}from"./careers-S8zIYKBd.js";const J=async m=>{try{let s=localStorage.getItem("token");return(await N(s).post("/professors/items",m)).data}catch(s){return console.error(s),j}},K=async m=>{try{let s=localStorage.getItem("token");return await N(s).post("/professors",m),!0}catch(s){return console.error(s),!1}},Q=async m=>{try{let s=localStorage.getItem("token");return await N(s).put(`/professors/${m.id}`,m),!0}catch(s){return console.error(s),!1}},D={id:null,code:null,name:"",paternal_surname:"",maternal_surname:"",document_type:"001",document_number:"",birthdate:"",phone_number:"",career_code:null,position_id:null,position_name:"",condition_id:null,condition_name:"",email:"",gender:"",status:!0},W=$({__name:"Form",props:{formState:{type:Object,default:()=>({})},careers:{type:Array,default:()=>[]}},emits:["onSuccess"],setup(m,{emit:s}){const v=s,_=f(!1),e=f({...D,...m.formState}),p=async i=>{_.value=!0,e.value.id?await Q(e.value)&&(e.value={...D},v("onSuccess"),i.value=!1):await K(e.value)&&(e.value={...D},v("onSuccess"),i.value=!1),_.value=!1};return(i,a)=>{const u=o("v-text-field"),c=o("v-col"),x=o("v-combobox"),V=o("v-switch"),w=o("v-row"),k=o("v-card-item"),g=o("v-btn"),I=o("v-spacer"),S=o("v-card-actions"),P=o("v-card"),C=o("v-form"),y=o("v-dialog");return A(),B(y,{"max-width":"700"},{activator:l(({props:r})=>[E(i.$slots,"btn",{activator:r})]),default:l(({isActive:r})=>[t(C,{onSubmit:q(n=>p(r),["prevent"])},{default:l(()=>[t(P,{title:e.value.id?"Editar":"Crear"},{default:l(()=>[t(k,null,{default:l(()=>[t(w,null,{default:l(()=>[t(c,{cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e.value.document_number,"onUpdate:modelValue":a[0]||(a[0]=n=>e.value.document_number=n),label:"DNI",rules:[d(U),d(L)]},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e.value.code,"onUpdate:modelValue":a[1]||(a[1]=n=>e.value.code=n),label:"Código Trabajador"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12"},{default:l(()=>[t(u,{modelValue:e.value.name,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value.name=n),label:"Nombre",rules:[d(U)]},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e.value.paternal_surname,"onUpdate:modelValue":a[3]||(a[3]=n=>e.value.paternal_surname=n),label:"Apellido Paterno",rules:[d(h)(e.value.maternal_surname)]},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e.value.maternal_surname,"onUpdate:modelValue":a[4]||(a[4]=n=>e.value.maternal_surname=n),label:"Apellido Materno",rules:[d(h)(e.value.paternal_surname)]},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e.value.email,"onUpdate:modelValue":a[5]||(a[5]=n=>e.value.email=n),label:"Email",rules:[d(U),d(z)]},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"12",md:"6"},{default:l(()=>[t(x,{modelValue:e.value.career_code,"onUpdate:modelValue":a[6]||(a[6]=n=>e.value.career_code=n),items:m.careers,label:"Carrera",hint:"Selecciona la carrera a la que pertenece","persistent-hint":"","return-object":!1},null,8,["modelValue","items"])]),_:1}),t(c,{cols:"12"},{default:l(()=>[t(V,{label:e.value.status?"Activo":"Inactivo",modelValue:e.value.status,"onUpdate:modelValue":a[7]||(a[7]=n=>e.value.status=n),color:"blue-darken-4",inset:""},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),t(S,null,{default:l(()=>[t(g,{text:"Cancel",onClick:n=>r.value=!1},null,8,["onClick"]),t(I),t(g,{text:"Guardar",color:"primary",type:"submit",loading:_.value},null,8,["loading"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onSubmit"])]),_:3})}}}),X=$({__name:"DataTable",setup(m){const s=[{title:"DNI",value:"document_number",sortable:!0},{title:"Nombre",sortable:!0,value:"name"},{title:"Apellido Paterno",sortable:!0,value:"paternal_surname"},{title:"Apellido Materno",sortable:!0,value:"maternal_surname"},{title:"Correo",sortable:!0,value:"email"},{title:"Escuela Profesional",value:"career_name"},{title:"Estado",sortable:!0,value:"status"},{title:"",value:"actions"}],v=H.map(a=>({title:a.name,value:a.code})),_=[{title:"Activo",value:!0},{title:"Inactivo",value:!1}],b=f(!1),e=f({page:1,itemsPerPage:10,search:"",filters:{},sortBy:[]}),p=f({...j}),i=async a=>{b.value=!0,a.value={...a.value,...a},p.value=await J(a.value),b.value=!1};return(a,u)=>{const c=o("v-btn"),x=o("v-text-field"),V=o("v-col"),w=o("v-select"),k=o("v-row"),g=o("v-card-item"),I=o("v-chip"),S=o("v-data-table-server"),P=o("v-card"),C=O("permission");return A(),B(P,null,{default:l(()=>{var y;return[t(g,null,{default:l(()=>[t(k,{justify:"space-between"},{default:l(()=>[t(V,{cols:"12",md:"5",class:"d-flex justify-end align-end"},{default:l(()=>[t(W,{onOnSuccess:u[0]||(u[0]=r=>i(e.value)),careers:d(v)},{btn:l(({activator:r})=>[T(t(c,M(r,{color:"primary",icon:"mdi-plus-circle-outline",class:"me-2"}),null,16),[[C,["professors.create"]]])]),_:1},8,["careers"]),t(x,{modelValue:e.value.search,"onUpdate:modelValue":u[1]||(u[1]=r=>e.value.search=r),label:"Buscar"},null,8,["modelValue"])]),_:1}),t(V,{cols:"12",md:"2"},{default:l(()=>[t(w,{modelValue:e.value.filters.status,"onUpdate:modelValue":[u[2]||(u[2]=r=>e.value.filters.status=r),i],label:"Estado",items:_,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(S,{"items-per-page":e.value.itemsPerPage,"onUpdate:itemsPerPage":u[3]||(u[3]=r=>e.value.itemsPerPage=r),headers:s,items:(y=p.value)==null?void 0:y.data,"items-length":p.value.total,search:e.value.search,"multi-sort":"",loading:b.value,"item-value":"id","items-per-page-text":"Número de filas por página:","onUpdate:options":i},{"item.status":l(({item:r})=>[t(I,{color:r.status?"info":"error"},{default:l(()=>[R(F(r.status?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),"item.actions":l(({item:r})=>[G("",!0)]),_:1},8,["items-per-page","items","items-length","search","loading"])]}),_:1})}}}),ae=$({__name:"index",setup(m){return(s,v)=>(A(),B(X))}});export{ae as default};
