import{q as y,d as E,b as m,r,k as C,o as v,c as f,w as t,a as o,g as b,l as P,u as R}from"./index-CEQLA3zn.js";import{E as N}from"./index-BBkAiBwi.js";const U=async()=>{try{const a=localStorage.getItem("token");return(await y(a).get("/reports/items/users")).data}catch(a){throw a}},j=async a=>{try{const n=localStorage.getItem("token"),s={data:a};let i=await(await y(n).post("/pdf/report/users",s,{responseType:"blob"})).data,l=window.URL.createObjectURL(i);var e=document.createElement("a");e.href=l,e.download="reporter-users.pdf",document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(l),document.body.removeChild(e)}catch(n){console.error("Error al generar o descargar el PDF:",n)}},L=E({__name:"users",setup(a){const e=m({datas:[],fileName:"reporte",type:"xlsx"}),n=()=>{e.value.datas=[{sheetData:s.value,sheetName:"Reporte",sheetFilter:["name","paternal_surname","maternal_surname","email","total_surveys","average_score","five_score","four_score","three_score","two_score","one_score","no_score"],sheetHeader:["Nombre","Apellido Paterno","Apellido Materno","Correo","Total de atenciones","Promedio","5","4","3","2","1","Sin calificar"]}],new N(e.value).saveExcel()},s=m([]),c=[{key:"name",sortable:!0,title:"Nombre"},{key:"paternal_surname",sortable:!0,title:"Apellido Paterno"},{key:"maternal_surname",sortable:!0,title:"Apellido Materno"},{key:"email",sortable:!0,title:"Correo"},{key:"total_surveys",sortable:!0,title:"Total de atenciones"},{key:"average_score",sortable:!0,title:"Promedio"},{key:"five_score",sortable:!0,title:"5"},{key:"four_score",sortable:!0,title:"4"},{key:"three_score",sortable:!0,title:"3"},{key:"two_score",sortable:!0,title:"2"},{key:"one_score",sortable:!0,title:"1"},{key:"no_score",sortable:!0,title:"Sin calificar"}];return(async()=>{s.value=await U()})(),(l,d)=>{const _=r("v-icon"),u=r("v-btn"),p=r("v-col"),k=r("v-row"),w=r("v-card-item"),x=r("v-data-table"),h=r("v-card"),g=C("permission");return v(),f(h,null,{default:t(()=>[o(w,null,{default:t(()=>[o(k,{justify:"space-between"},{default:t(()=>[o(p,{cols:"12",md:"5",class:""},{default:t(()=>[o(u,{icon:"",class:"mr-2",color:"green",variant:"tonal",onClick:n},{default:t(()=>[o(_,null,{default:t(()=>[b("mdi-file-excel")]),_:1})]),_:1}),P((v(),f(u,{icon:"",onClick:d[0]||(d[0]=A=>R(j)(s.value)),class:"mr-2",color:"red",variant:"tonal"},{default:t(()=>[o(_,null,{default:t(()=>[b("mdi-file-pdf-box")]),_:1})]),_:1})),[[g,["reports.pdf"]]])]),_:1}),o(p,{cols:"12",md:"7",class:"d-flex justify-end align-end"})]),_:1})]),_:1}),o(x,{items:s.value,headers:c},null,8,["items"])]),_:1})}}});export{L as default};
